{"version":3,"sources":["webpack:///./src/page/count_center/ip_attribution/inside/index.vue?d483","webpack:///./src/page/count_center/ip_attribution/inside/index.vue?e37c","webpack:///src/page/count_center/ip_attribution/inside/index.vue","webpack:///./src/page/count_center/ip_attribution/inside/index.vue?d45c","webpack:///./src/page/count_center/ip_attribution/inside/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","onSubmit","model","value","callback","$$v","searchForm","expression","attrs","time","$event","$set","type","countData","data","loading","totalInfo","scopedSlots","_u","key","fn","channel","onAllChange","allOrinfo","_v","_e","proxy","onSelectChange","select","_l","item","i","label","column","tableData","total","tableOpt","currentPage","onPageChange","staticRenderFns","components","FilterLayout","TableLayout","CountLayout","SelectOriginChannel","prop","selectOption","moment","pageSize","pickerOptions","mounted","$route","query","origin","fetchList","fetchCount","methods","current","navCate","timeBegin","timeEnd","err","res","list","legendData","xAxisData","date","listAll","Object","_","component"],"mappings":"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","file":"chunk-05189134.1.0.0.1672021042960.js","sourcesContent":["export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=5e326b8e&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_c('FilterLayout',{on:{\"onSubmit\":_vm.onSubmit},model:{value:(_vm.searchForm),callback:function ($$v) {_vm.searchForm=$$v},expression:\"searchForm\"}},[_c('el-col',{attrs:{\"md\":12,\"lg\":6,\"sm\":24}},[_c('el-form-item',{attrs:{\"label\":\"时间\",\"prop\":\"time\"}},[_c('dataPicker',{attrs:{\"datevalue\":_vm.searchForm.time},on:{\"update:datevalue\":function($event){return _vm.$set(_vm.searchForm, \"time\", $event)}}})],1)],1),_c('el-col',{attrs:{\"md\":6,\"sm\":12}},[_c('el-form-item',{attrs:{\"label\":\"渠道\",\"prop\":\"channel\"}},[_c('SelectOriginChannel',{attrs:{\"params\":{ type: 3 }},model:{value:(_vm.searchForm.channel),callback:function ($$v) {_vm.$set(_vm.searchForm, \"channel\", $$v)},expression:\"searchForm.channel\"}})],1)],1)],1),_c('CountLayout',{attrs:{\"option\":_vm.countData.data,\"loading\":_vm.countData.loading,\"countInfo\":_vm.countData.totalInfo},scopedSlots:_vm._u([{key:\"cetent\",fn:function(){return [(_vm.searchForm.channel.length)?_c('el-radio-group',{on:{\"change\":_vm.onAllChange},model:{value:(_vm.allOrinfo),callback:function ($$v) {_vm.allOrinfo=$$v},expression:\"allOrinfo\"}},[_c('el-radio-button',{attrs:{\"label\":1}},[_vm._v(\"汇总走势\")]),_c('el-radio-button',{attrs:{\"label\":2}},[_vm._v(\"明细走势\")])],1):_vm._e()]},proxy:true},{key:\"option\",fn:function(){return [_c('el-col',{attrs:{\"md\":6,\"sm\":12}},[_c('el-form-item',{attrs:{\"label\":\"筛选项\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择筛选项\",\"popper-append-to-body\":false},on:{\"change\":_vm.onSelectChange},model:{value:(_vm.select),callback:function ($$v) {_vm.select=$$v},expression:\"select\"}},_vm._l((_vm.selectOption),function(item,i){return _c('el-option',{key:i,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1)],1)]},proxy:true}])}),_c('TableLayout',{attrs:{\"column\":_vm.column,\"data\":_vm.tableData.data,\"total\":_vm.tableData.total,\"loading\":_vm.tableData.loading,\"currentPage\":_vm.tableOpt.currentPage,\"params\":_vm.searchForm,\"leadOut\":true,\"leadApi\":\"Order_Statistics/firstRate\"},on:{\"pageChange\":_vm.onPageChange}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"home\">\r\n    <FilterLayout v-model=\"searchForm\" @onSubmit=\"onSubmit\">\r\n      <el-col :md=\"12\" :lg=\"6\" :sm=\"24\">\r\n        <el-form-item label=\"时间\" prop=\"time\">\r\n          <!-- <el-date-picker\r\n            v-model=\"searchForm.time\"\r\n            type=\"daterange\"\r\n            range-separator=\"~\"\r\n            start-placeholder=\"开始日期\"\r\n            end-placeholder=\"结束日期\"\r\n            :picker-options=\"pickerOptions\"\r\n            value-format=\"yyyy-MM-dd\"\r\n            :clearable=\"false\"\r\n            :append-to-body=\"false\"\r\n            unlink-panels\r\n          /> -->\r\n          <dataPicker :datevalue.sync=\"searchForm.time\"></dataPicker>\r\n        </el-form-item>\r\n      </el-col>\r\n      <el-col :md=\"6\" :sm=\"12\">\r\n        <el-form-item label=\"渠道\" prop=\"channel\">\r\n          <SelectOriginChannel\r\n            v-model=\"searchForm.channel\"\r\n            :params=\"{ type: 3 }\"\r\n          ></SelectOriginChannel>\r\n        </el-form-item>\r\n      </el-col>\r\n    </FilterLayout>\r\n    <CountLayout\r\n      :option=\"countData.data\"\r\n      :loading=\"countData.loading\"\r\n      :countInfo=\"countData.totalInfo\"\r\n    >\r\n      <template #cetent>\r\n        <el-radio-group\r\n          v-model=\"allOrinfo\"\r\n          @change=\"onAllChange\"\r\n          v-if=\"searchForm.channel.length\"\r\n        >\r\n          <el-radio-button :label=\"1\">汇总走势</el-radio-button>\r\n          <el-radio-button :label=\"2\">明细走势</el-radio-button>\r\n        </el-radio-group>\r\n      </template>\r\n      <template #option>\r\n        <el-col :md=\"6\" :sm=\"12\">\r\n          <el-form-item label=\"筛选项\">\r\n            <el-select\r\n              v-model=\"select\"\r\n              placeholder=\"请选择筛选项\"\r\n              :popper-append-to-body=\"false\"\r\n              @change=\"onSelectChange\"\r\n            >\r\n              <el-option\r\n                :key=\"i\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\"\r\n                v-for=\"(item, i) in selectOption\"\r\n              />\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n      </template>\r\n    </CountLayout>\r\n    <TableLayout\r\n      :column=\"column\"\r\n      :data=\"tableData.data\"\r\n      :total=\"tableData.total\"\r\n      :loading=\"tableData.loading\"\r\n      :currentPage=\"tableOpt.currentPage\"\r\n      :params=\"searchForm\"\r\n      :leadOut=\"true\"\r\n      leadApi=\"Order_Statistics/firstRate\"\r\n      @pageChange=\"onPageChange\"\r\n    ></TableLayout>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport moment from \"moment\";\r\nimport _ from \"lodash\";\r\nimport FilterLayout from \"@/layout/form\";\r\nimport CountLayout from \"@/layout/count\";\r\nimport TableLayout from \"@/layout/table\";\r\nimport { pickerOptions } from \"@/config/option\";\r\nimport SelectOriginChannel from \"@/component/select-origin-channel\";\r\n\r\nexport default {\r\n  components: {\r\n    FilterLayout,\r\n    TableLayout,\r\n    CountLayout,\r\n    SelectOriginChannel,\r\n  },\r\n  data() {\r\n    return {\r\n      select: 1,\r\n      allOrinfo: 1,\r\n      column: [\r\n        {\r\n          prop: \"date\",\r\n          label: \"日期\",\r\n        },\r\n        {\r\n          prop: \"today_pv\",\r\n          label: \"浏览量PV\",\r\n        },\r\n        {\r\n          prop: \"today_uv\",\r\n          label: \"独立访客UV\",\r\n        },\r\n        {\r\n          prop: \"device_new\",\r\n          label: \"归因新增\",\r\n        },\r\n        {\r\n          prop: \"device_active\",\r\n          label: \"归因活跃\",\r\n        },\r\n      ],\r\n      selectOption: [\r\n        {\r\n          label: \"归因新增\",\r\n          value: 1,\r\n        },\r\n        {\r\n          label: \"归因活跃\",\r\n          value: 2,\r\n        },\r\n        {\r\n          label: \"浏览量PV\",\r\n          value: 3,\r\n        },\r\n        {\r\n          label: \"独立访客UV\",\r\n          value: 4,\r\n        },\r\n      ],\r\n      searchForm: {\r\n        time: [\r\n          moment().subtract(30, \"d\").format(\"YYYY-MM-DD\"),\r\n          moment().subtract(1, \"d\").format(\"YYYY-MM-DD\"),\r\n        ],\r\n        channel: [],\r\n      },\r\n      tableOpt: {\r\n        currentPage: 1,\r\n        pageSize: 10,\r\n      },\r\n      tableData: {\r\n        data: [],\r\n        total: 0,\r\n        loading: false,\r\n        currentPage: 1,\r\n        pageSize: 10,\r\n      },\r\n      pickerOptions: {\r\n        ...pickerOptions,\r\n      },\r\n      countData: {\r\n        data: {},\r\n        totalInfo: {},\r\n        loading: false,\r\n      },\r\n    };\r\n  },\r\n  mounted() {\r\n    if (this.$route.query.origin) {\r\n      this.searchForm.channel = [this.$route.query.origin];\r\n    }\r\n\r\n    this.fetchList();\r\n    this.fetchCount();\r\n  },\r\n  methods: {\r\n    onSubmit() {\r\n      this.tableOpt.currentPage = 1;\r\n      this.fetchList();\r\n      this.fetchCount();\r\n    },\r\n    onPageChange(current) {\r\n      this.tableOpt.currentPage = current;\r\n      this.fetchList();\r\n    },\r\n    onSelectChange() {\r\n      this.fetchCount();\r\n    },\r\n    async fetchList() {\r\n      const { searchForm, tableOpt } = this;\r\n\r\n      this.tableData.loading = true;\r\n\r\n      const [err, res] = await this.$http.post(\"Ip/ipStatics\", {\r\n        ...searchForm,\r\n        ...tableOpt,\r\n        navCate: 2,\r\n        channel: searchForm[\"channel\"].join(\",\"),\r\n        timeBegin: searchForm[\"time\"][0],\r\n        timeEnd: searchForm[\"time\"][1],\r\n      });\r\n\r\n      this.tableData.loading = false;\r\n\r\n      if (err) return;\r\n\r\n      const { list, currentPage, total } = res;\r\n\r\n      this.tableData.data = list;\r\n      this.tableData.currentPage = currentPage;\r\n      this.tableData.total = total;\r\n    },\r\n    onAllChange() {\r\n      this.fetchCount();\r\n    },\r\n    async fetchCount() {\r\n      const { searchForm, select } = this;\r\n\r\n      this.countData.loading = true;\r\n\r\n      const [err, res] = await this.$http.post(\"Ip/ipStatics\", {\r\n        ...searchForm,\r\n        select,\r\n        navCate: 1,\r\n        channel: searchForm[\"channel\"].join(\",\"),\r\n        timeBegin: searchForm[\"time\"][0],\r\n        timeEnd: searchForm[\"time\"][1],\r\n      });\r\n\r\n      this.countData.loading = false;\r\n\r\n      if (err) {\r\n        this.countData.data = {\r\n          legendData: [],\r\n          xAxisData: [],\r\n          data: [],\r\n        };\r\n        return;\r\n      }\r\n      const { date, list, totalInfo, listAll } = res;\r\n\r\n      if (this.allOrinfo == 1 && searchForm[\"channel\"].length > 0) {\r\n        const xAxisData = date;\r\n        const legendData = Object.keys(listAll);\r\n        const data = _.values(listAll);\r\n\r\n        this.countData.totalInfo = totalInfo;\r\n        this.countData.data = {\r\n          legendData,\r\n          xAxisData,\r\n          data,\r\n        };\r\n      } else {\r\n        const xAxisData = date;\r\n        const legendData = Object.keys(list);\r\n        const data = _.values(list);\r\n\r\n        this.countData.totalInfo = totalInfo;\r\n        this.countData.data = {\r\n          legendData,\r\n          xAxisData,\r\n          data,\r\n        };\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n/deep/ .el-cascader__search-input {\r\n  min-width: 10px;\r\n}\r\n</style>","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=5e326b8e&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=5e326b8e&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5e326b8e\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}