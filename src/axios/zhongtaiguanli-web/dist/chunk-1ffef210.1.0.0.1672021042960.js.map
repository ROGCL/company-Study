{"version":3,"sources":["webpack:///./src/layout/count/index.vue?03cb","webpack:///./src/layout/count/index.vue?8ad3","webpack:///src/layout/count/index.vue","webpack:///./src/layout/count/index.vue?cff6","webpack:///./src/layout/count/index.vue","webpack:///./src/page/count_center/ip_attribution/cost/index.vue?0b05","webpack:///src/page/count_center/ip_attribution/cost/index.vue","webpack:///./src/page/count_center/ip_attribution/cost/index.vue?8958","webpack:///./src/page/count_center/ip_attribution/cost/index.vue","webpack:///./src/page/count_center/ip_attribution/cost/index.vue?f8b8"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_t","attrs","Object","keys","countInfo","_v","_s","countShow","total","avg","_e","countInfoArr","length","_l","item","index","key","staticStyle","name","_f","slice","slot","ref","staticRenderFns","props","type","validator","indexOf","value","default","option","loading","data","$count","mounted","$echarts","init","$refs","count","window","drawNewMixCount","drawCount","drawMixCount","drawNewBarCount","drawBarCount","watch","opt","val","filters","countInfoFilters","hasPercentSign","parseFloat","toLocaleString","minimumFractionDigits","methods","editData","legendData","xAxisData","yName","yScale","formatter","xName","arr","list","_data","symbolSize","smooth","showAllSymbol","hoverAnimation","cycle","rate","symbol","clear","setOption","tooltip","trigger","borderRadius","v","rs","cunt","text","noDataLoadingOption","effect","effectOption","n","legend","grid","left","right","bottom","containLabel","xAxis","axisLabel","fontSize","color","yAxis","scale","splitLine","lineStyle","padding","series","allName","res","all","html","stack","label","normal","show","position","textStyle","axisPointer","console","yAxisIndex","itemStyle","axisTick","alignWithLabel","component","on","onSubmit","model","callback","$$v","searchForm","expression","time","$event","$set","countData","totalInfo","scopedSlots","_u","fn","changeComparisonKey","select_data","i","id","select_data_copy","title","changeCheck","checked","changeComparisonKeyCopy","proxy","column","tableData","tableOpt","currentPage","onSizeChange","onPageChange","components","FilterLayout","TableLayout","CountLayout","targetList","pageSize","moment","numKeyArr","prop","count_data","count_data_copy","count_xAxisData","count_total","count_avg","count_total_copy","count_avg_copy","fetchList","getfetchList","timeStart","timeEnd","err","total_avg","total_sum","mean","fetchCount","valData","target_id","newList","min","current","filData","filData_copy"],"mappings":"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A7F,IACAgD,EAAA,GACAuH,EAAAjH,mBACA,eAEAC,EAAA,CACAhC,OACAd,gBACAO,aAEAsC,uBACAN,4CAEAsC,EAAA,aACA,CACA,CACAtE,aACAP,gBACA+J,MACAhF,WACAC,WACAzE,iBAIA,CACAA,aACAP,gBACA+J,MACAhF,WACAC,WACAzE,kBAKA,CACA,CACAA,aACAP,gBACA+J,MACAhF,WACAC,WACAzE,kBAKA,kBACA,uBACA,mBACA,iBACA,qBACA+B,qDACAC,YACAzB,+CACA+D,QACAnC,sBACA,6CAQA,OAPA0C,uBACAE,uDACA,qCACArD,qCACA0B,QAHA,YAMA,IAGA,aACA,0BACA,CACA3D,gBACAV,QACAC,OAEA,CACAS,gBACAV,4BACAC,0BAGA,0BACA,CACAS,gBACAV,QACAC,QAtPA,0GA0PIoI,wBA1PJ,oEA0PA9F,GA1PA,+HA2PAoI,EAAA,oCACA,kBAEAC,EAAA,oCACA,8BAEAN,EAAA,GACA,qCACA,UACAA,cApQA,SAuQA,0CACAP,qCACAC,mCACAO,kCA1QA,yCAuQAN,EAvQA,KAuQAnE,EAvQA,MA4QAmE,EA5QA,mDA6QA1G,EAAAuC,EAAAvC,KAAAvD,EAAA8F,EAAA9F,MAAAC,EAAA6F,EAAA7F,IACA,wBACA,sBACAgD,EAAA,GACAuH,EAAAjH,mBACA,eAEAC,EAAA,CACAhC,OACAd,gBACAO,aAEAsC,uBACAN,4CAEAsC,EAAA,CACA,CACAtE,aACAP,gBACA+J,MACAhF,WACAC,WACAzE,iBAIA,CACAA,aACAP,gBACA+J,MACAhF,WACAC,WACAzE,kBAKA,uBACA,qBACA+B,+BACAC,YACAzB,yBACA+D,QACAnC,sBACA,6CAQA,OAPA0C,uBACAE,uDACA,qCACArD,qCACA0B,QAHA,YAMA,IAGA,0BACA,CACA3D,gBACAV,uBACAC,oBAEA,CACAS,gBACAV,QACAC,QA7UA,0GAiVIkI,YAjVJ,SAiVA5F,GACMrD,KAAK+I,iBAAmB,MCtgB8V,I,wBCQxXpB,EAAY,eACd,EACA7H,EACA+B,GACA,EACA,KACA,WACA,MAIa,aAAA8F,E,kECnBf","file":"chunk-1ffef210.1.0.0.1672021042960.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=504f9ee7&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"count-wrap\"},[_vm._t(\"title\"),_c('div',{staticClass:\"count-option\"},[_c('el-form',{attrs:{\"inline\":true}},[_c('el-row',[_vm._t(\"option\"),_c('div',{staticClass:\"cetent\"},[_vm._t(\"cetent\")],2)],2)],1),_c('div',{staticClass:\"extra\"},[_vm._t(\"extra\",function(){return [(Object.keys(_vm.countInfo).length)?_c('div',{staticClass:\"tag\"},[_c('div',{staticClass:\"tag-item\"},[_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.countShow))]),_c('div',{staticClass:\"value\"},[_vm._v(_vm._s(_vm.countInfo.total))])]),_c('div',{staticClass:\"tag-item\"},[_c('div',{staticClass:\"name\"},[_vm._v(\"平均:\")]),_c('div',{staticClass:\"value\"},[_vm._v(_vm._s(_vm.countInfo.avg))])])]):_vm._e()]})],2),_c('div',{staticClass:\"extra\"},[_vm._t(\"extras\",function(){return [(_vm.countInfoArr.length <= 2 && _vm.countInfoArr.length)?_c('div',{staticClass:\"tags\"},_vm._l((_vm.countInfoArr),function(item,index){return _c('div',{key:index,staticStyle:{\"display\":\"flex\"}},[_c('div',{staticClass:\"tag-item\",staticStyle:{\"font-weight\":\"bolder\"}},[_vm._v(\"\\n              \"+_vm._s(item.name)+\"：\\n            \")]),_c('div',{staticClass:\"tag-item\"},[_c('div',{staticClass:\"name\"},[_vm._v(\"合计\")]),_c('div',{staticClass:\"value\"},[_vm._v(\"\\n                \"+_vm._s(_vm._f(\"countInfoFilters\")(item.total,item))+\"\\n              \")])]),_c('div',{staticClass:\"tag-item\"},[_c('div',{staticClass:\"name\"},[_vm._v(\"均值:\")]),_c('div',{staticClass:\"value\"},[_vm._v(_vm._s(_vm._f(\"countInfoFilters\")(item.avg,item)))])])])}),0):_vm._e(),(_vm.countInfoArr.length > 2 && _vm.countInfoArr.length)?_c('div',{staticClass:\"tags\"},[_vm._l((_vm.countInfoArr.slice(0, 2)),function(item,index){return _c('div',{key:index,staticStyle:{\"display\":\"flex\"}},[_c('div',{staticClass:\"tag-item\",staticStyle:{\"font-weight\":\"bolder\"}},[_vm._v(\"\\n              \"+_vm._s(item.name)+\"：\\n            \")]),_c('div',{staticClass:\"tag-item\"},[_c('div',{staticClass:\"name\"},[_vm._v(\"合计\")]),_c('div',{staticClass:\"value\"},[_vm._v(\"\\n                \"+_vm._s(_vm._f(\"countInfoFilters\")(item.total,item))+\"\\n              \")])]),_c('div',{staticClass:\"tag-item\"},[_c('div',{staticClass:\"name\"},[_vm._v(\"均值:\")]),_c('div',{staticClass:\"value\"},[_vm._v(_vm._s(_vm._f(\"countInfoFilters\")(item.avg,item)))])])])}),_c('el-dropdown',{staticStyle:{\"z-index\":\"9999\"}},[_c('span',{staticClass:\"el-dropdown-link\"},[_vm._v(\"\\n              详情\"),_c('i',{staticClass:\"el-icon-arrow-down el-icon--right\"})]),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},_vm._l((_vm.countInfoArr.slice(2)),function(item,index){return _c('el-dropdown-item',{key:index},[_vm._v(\"\\n                \"+_vm._s(item.name)+\"： 合计\"+_vm._s(_vm._f(\"countInfoFilters\")(item.total,item))+\"，均值 \"+_vm._s(_vm._f(\"countInfoFilters\")(item.avg,item))+\"\\n              \")])}),1)],1)],2):_vm._e()]})],2)],1),_c('div',{ref:\"count\",staticStyle:{\"width\":\"100%\",\"height\":\"400px\"}}),_vm._t(\"option-two\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"count-wrap\">\r\n    <slot name=\"title\"></slot>\r\n    <div class=\"count-option\">\r\n      <el-form :inline=\"true\">\r\n        <el-row>\r\n          <slot name=\"option\"></slot>\r\n          <div class=\"cetent\">\r\n            <slot name=\"cetent\"></slot>\r\n          </div>\r\n        </el-row>\r\n      </el-form>\r\n      <div class=\"extra\">\r\n        <slot name=\"extra\">\r\n          <div v-if=\"Object.keys(countInfo).length\" class=\"tag\">\r\n            <div class=\"tag-item\">\r\n              <div class=\"name\">{{ countShow }}</div>\r\n              <div class=\"value\">{{ countInfo.total }}</div>\r\n            </div>\r\n            <div class=\"tag-item\">\r\n              <div class=\"name\">平均:</div>\r\n              <div class=\"value\">{{ countInfo.avg }}</div>\r\n            </div>\r\n          </div>\r\n        </slot>\r\n      </div>\r\n      <div class=\"extra\">\r\n        <slot name=\"extras\">\r\n          <div\r\n            v-if=\"countInfoArr.length <= 2 && countInfoArr.length\"\r\n            class=\"tags\"\r\n          >\r\n            <div\r\n              v-for=\"(item, index) in countInfoArr\"\r\n              :key=\"index\"\r\n              style=\"display: flex\"\r\n            >\r\n              <div class=\"tag-item\" style=\"font-weight: bolder\">\r\n                {{ item.name }}：\r\n              </div>\r\n              <div class=\"tag-item\">\r\n                <div class=\"name\">合计</div>\r\n                <!-- <div class=\"value\">{{ parseFloat(item.total).toLocaleString() }}</div> -->\r\n                <div class=\"value\">\r\n                  {{ item.total | countInfoFilters(item) }}\r\n                </div>\r\n              </div>\r\n              <div class=\"tag-item\">\r\n                <div class=\"name\">均值:</div>\r\n                <div class=\"value\">{{ item.avg | countInfoFilters(item) }}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div\r\n            v-if=\"countInfoArr.length > 2 && countInfoArr.length\"\r\n            class=\"tags\"\r\n          >\r\n            <div\r\n              v-for=\"(item, index) in countInfoArr.slice(0, 2)\"\r\n              :key=\"index\"\r\n              style=\"display: flex\"\r\n            >\r\n              <div class=\"tag-item\" style=\"font-weight: bolder\">\r\n                {{ item.name }}：\r\n              </div>\r\n              <div class=\"tag-item\">\r\n                <div class=\"name\">合计</div>\r\n                <div class=\"value\">\r\n                  {{ item.total | countInfoFilters(item) }}\r\n                </div>\r\n              </div>\r\n              <div class=\"tag-item\">\r\n                <div class=\"name\">均值:</div>\r\n                <div class=\"value\">{{ item.avg | countInfoFilters(item) }}</div>\r\n              </div>\r\n            </div>\r\n            <el-dropdown style=\"z-index: 9999\">\r\n              <span class=\"el-dropdown-link\">\r\n                详情<i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n              </span>\r\n              <el-dropdown-menu slot=\"dropdown\">\r\n                <el-dropdown-item\r\n                  v-for=\"(item, index) in countInfoArr.slice(2)\"\r\n                  :key=\"index\"\r\n                >\r\n                  {{ item.name }}： 合计{{\r\n                    item.total | countInfoFilters(item)\r\n                  }}，均值 {{ item.avg | countInfoFilters(item) }}\r\n                </el-dropdown-item>\r\n              </el-dropdown-menu>\r\n            </el-dropdown>\r\n          </div>\r\n        </slot>\r\n      </div>\r\n    </div>\r\n    <div ref=\"count\" style=\"width: 100%; height: 400px\"></div>\r\n    <slot name=\"option-two\"></slot>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport moment from \"moment\";\r\nimport _ from \"lodash\";\r\nexport default {\r\n  name: \"countLayout\",\r\n  props: {\r\n    type: {\r\n      validator: function (value) {\r\n        return [\"line\", \"bar\", \"newBar\", \"mix\", \"newMix\"].indexOf(value) !== -1;\r\n      },\r\n      default: \"line\",\r\n    },\r\n    option: {\r\n      type: Object,\r\n      default: () => ({}),\r\n    },\r\n    loading: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    countInfo: {\r\n      type: Object,\r\n      default: () => ({}),\r\n    },\r\n    countInfoArr: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      countShow: \"合计:\",\r\n      $count: null,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.$count = this.$echarts.init(this.$refs.count);\r\n\r\n    window.onresize = () => {\r\n      this.$count && this.$count.resize();\r\n    };\r\n\r\n    if (this.type === \"bar\") {\r\n      this.drawBarCount();\r\n      return;\r\n    }\r\n\r\n    if (this.type === \"newBar\") {\r\n      this.drawNewBarCount();\r\n      return;\r\n    }\r\n\r\n    if (this.type === \"mix\") {\r\n      this.drawMixCount();\r\n      return;\r\n    }\r\n    if (this.type === \"newMix\") {\r\n      this.drawNewMixCount();\r\n    }\r\n\r\n    this.drawCount();\r\n  },\r\n  watch: {\r\n    option(opt) {\r\n      if (this.type === \"bar\") {\r\n        this.drawBarCount(opt);\r\n        return;\r\n      }\r\n\r\n      if (this.type === \"newBar\") {\r\n        this.drawNewBarCount(opt);\r\n        return;\r\n      }\r\n\r\n      if (this.type === \"mix\") {\r\n        this.drawMixCount();\r\n        return;\r\n      }\r\n      if (this.type === \"newMix\") {\r\n        this.drawNewMixCount();\r\n        return;\r\n      }\r\n\r\n      this.drawCount(opt);\r\n    },\r\n    loading(val) {\r\n      val ? this.$count.showLoading() : this.$count.hideLoading();\r\n    },\r\n  },\r\n  filters: {\r\n    countInfoFilters(val, item) {\r\n      // 因为toLocaleString默认是保留3位小数，使用此方法动态获取小数点位数并做保留，小数点后有多少就保留多少\r\n      let arr = _.cloneDeep(val+'').split(\".\");\r\n      if (item.hasPercentSign) {\r\n        return parseFloat(val).toLocaleString() + \"%\";\r\n      } else {\r\n        return parseFloat(val).toLocaleString(\"zh\", {\r\n          minimumFractionDigits: arr.length > 1 ? arr[1].length : 0,\r\n        });\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    drawCount(opt = this.option) {\r\n      const {\r\n        editData,\r\n        legendData = [],\r\n        xAxisData = [],\r\n        data = [],\r\n        yName = \"\",\r\n        yScale = false,\r\n        formatter = (f) => f,\r\n        xName = \"\",\r\n      } = opt;\r\n      if (yName === \"百分比\") {\r\n        this.countShow = \"\";\r\n      } else {\r\n        this.countShow = \"合计:\";\r\n      }\r\n      const { type } = this;\r\n      let _data;\r\n      if (editData) {\r\n        let list = [];\r\n        for (let key in data) {\r\n          let arr = {};\r\n          arr.name = key;\r\n          arr.data = [];\r\n          for (let j in data[key]) {\r\n            arr.data.push(data[key][j]);\r\n          }\r\n          list.push(arr);\r\n        }\r\n        _data = list.map((v) => {\r\n          return {\r\n            name: v.name,\r\n            type: type,\r\n            symbolSize: \"7\",\r\n            smooth: true,\r\n            showAllSymbol: true,\r\n            hoverAnimation: false,\r\n            data: v.data.map((_v, _i) => {\r\n              const week = xAxisData ? moment(String(_v.date)).format(\"E\") : 0;\r\n              return {\r\n                value: String(_v.value),\r\n                cycle: _v.cycle,\r\n                rate: _v.rate,\r\n                symbol: week === \"6\" || week === \"7\" ? \"circle\" : \"emptyCircle\",\r\n              };\r\n            }),\r\n          };\r\n        });\r\n      } else {\r\n        _data = data.map((v) => {\r\n          return {\r\n            name: v.name,\r\n            type: type,\r\n            symbolSize: \"7\",\r\n            smooth: true,\r\n            showAllSymbol: true,\r\n            hoverAnimation: false,\r\n            data: v.data.map((_v, _i) => {\r\n              const week = xAxisData ? moment(xAxisData[_i]).format(\"E\") : 0;\r\n              return {\r\n                value: _v,\r\n                symbol: week === \"6\" || week === \"7\" ? \"circle\" : \"emptyCircle\",\r\n              };\r\n            }),\r\n          };\r\n        });\r\n      }\r\n      this.$count.clear();\r\n      this.$count.setOption({\r\n        tooltip: {\r\n          trigger: \"axis\",\r\n          borderRadius: 6,\r\n          formatter: (data) => {\r\n            // let rs = `${moment(data[0].name).format('YYYY-MM-DD')}<br/>`;\r\n            let rs = `${data[0].name} <br/>`;\r\n            data.length &&\r\n              data.forEach((v) => {\r\n                let cunt = yName === \"百分比\" ? \"%\" : \"\";\r\n                let text =\r\n                  v.data.rate === undefined\r\n                    ? \"\"\r\n                    : `同比：${v.data.rate}% 环比：${v.data.cycle}% <br/>`;\r\n                rs += editData\r\n                  ? v[\"seriesName\"] +\r\n                    \": \" +\r\n                    formatter(v[\"value\"]) +\r\n                    cunt +\r\n                    \"<br>\" +\r\n                    text\r\n                  : v[\"seriesName\"] + \": \" + formatter(v[\"value\"]) + \"<br>\";\r\n              });\r\n            return rs;\r\n          },\r\n        },\r\n        noDataLoadingOption: {\r\n          text: \"暂无数据\",\r\n          effect: \"bubble\",\r\n          effectOption: {\r\n            effect: {\r\n              n: 0,\r\n            },\r\n          },\r\n        },\r\n        legend: {\r\n          data: legendData,\r\n        },\r\n        grid: {\r\n          left: \"3%\",\r\n          right: \"6%\",\r\n          bottom: \"3%\",\r\n          containLabel: true,\r\n        },\r\n        xAxis: {\r\n          type: \"category\",\r\n          name: xName,\r\n          data: xAxisData,\r\n          axisLabel: {\r\n            fontSize: 12,\r\n            color: \"#8C8C8C\",\r\n          },\r\n        },\r\n        yAxis: {\r\n          type: \"value\",\r\n          name: yName,\r\n          scale: yScale,\r\n          splitLine: {\r\n            lineStyle: {\r\n              type: \"dashed\",\r\n            },\r\n          },\r\n          axisLabel: {\r\n            fontSize: 13,\r\n            color: \"#8C8C8C\",\r\n            padding: [0, 10, 0, 0],\r\n            formatter: (v) => {\r\n              let cunt = yName === \"百分比\" ? \"%\" : \"\";\r\n              return formatter && formatter(v) + cunt;\r\n            },\r\n          },\r\n        },\r\n        series: _data,\r\n      });\r\n    },\r\n    drawBarCount(opt = this.option) {\r\n      const {\r\n        xAxis = [],\r\n        yAxis = [],\r\n        series = [],\r\n        legend = [],\r\n        tooltip = {\r\n          trigger: \"axis\",\r\n          borderRadius: 6,\r\n        },\r\n      } = opt;\r\n      this.$count.clear();\r\n      this.$count.setOption({\r\n        color: [\"#3398DB\"],\r\n        tooltip,\r\n        legend,\r\n        grid: {\r\n          left: \"3%\",\r\n          right: \"6%\",\r\n          bottom: \"3%\",\r\n          containLabel: true,\r\n        },\r\n        xAxis,\r\n        yAxis,\r\n        series,\r\n      });\r\n    },\r\n    drawNewBarCount(opt = this.option) {\r\n      const {\r\n        legendData = [],\r\n        xAxisData = [],\r\n        data = [],\r\n        yName = \"\",\r\n        allName = \"合计\",\r\n        yScale = false,\r\n        formatter = (res) => {\r\n          if (res.length) {\r\n            let html = `${res[0].axisValueLabel}<br/>`;\r\n            let all = 0;\r\n\r\n            res.forEach((v) => {\r\n              all += Number(v.value);\r\n              all = Number(all.toFixed(2));\r\n              html += `${v.marker}${v.seriesName}：${v.value}<br/>`;\r\n            });\r\n            if (allName) {\r\n              return html + `${allName}：${all.toFixed(2)}<br/>`;\r\n            } else {\r\n              return html;\r\n            }\r\n          }\r\n\r\n          return \"\";\r\n        },\r\n      } = opt;\r\n\r\n      let _data = data.map((item) => ({\r\n        type: \"bar\",\r\n        stack: \"two\",\r\n        name: item.name,\r\n        data: item.data,\r\n        label: item.showlabel\r\n          ? {\r\n              normal: {\r\n                show: true,\r\n                position: \"top\",\r\n                textStyle: {\r\n                  color: \"#000\",\r\n                },\r\n              },\r\n            }\r\n          : \"\",\r\n      }));\r\n\r\n      this.$count.clear();\r\n      this.$count.setOption({\r\n        tooltip: {\r\n          trigger: \"axis\",\r\n          borderRadius: 6,\r\n          axisPointer: {\r\n            type: \"shadow\",\r\n          },\r\n          formatter: (data) => {\r\n            return formatter(data);\r\n          },\r\n        },\r\n        legend: {\r\n          data: legendData,\r\n        },\r\n        grid: {\r\n          left: \"3%\",\r\n          right: \"6%\",\r\n          bottom: \"3%\",\r\n          containLabel: true,\r\n        },\r\n        xAxis: {\r\n          type: \"category\",\r\n          data: xAxisData,\r\n          axisLabel: {\r\n            fontSize: 12,\r\n            color: \"#8C8C8C\",\r\n          },\r\n        },\r\n        yAxis: {\r\n          type: \"value\",\r\n          name: yName,\r\n          scale: yScale,\r\n          splitLine: {\r\n            lineStyle: {\r\n              type: \"dashed\",\r\n            },\r\n          },\r\n          axisLabel: {\r\n            fontSize: 13,\r\n            color: \"#8C8C8C\",\r\n            padding: [0, 10, 0, 0],\r\n          },\r\n        },\r\n        color: [\"#5291EC\", \"#16C06F\", \"#FFC706\", \"#8267DB\", \"#FF6573\"],\r\n        series: _data,\r\n      });\r\n    },\r\n    drawMixCount(opt = this.option) {\r\n      const {\r\n        legendData = [],\r\n        xAxisData = [],\r\n        data = [],\r\n        yAxis = {},\r\n        formatter = (res) => {\r\n          if (res.length) {\r\n            let html = `${res[0].axisValueLabel}<br/>`;\r\n            let all = 0;\r\n\r\n            res.forEach((v) => {\r\n              all += Number(v.value);\r\n              html += `${v.marker}${v.seriesName}：${v.value}<br/>`;\r\n            });\r\n\r\n            return html + `合计：${all}<br/>`;\r\n          }\r\n\r\n          return \"\";\r\n        },\r\n      } = opt;\r\n\r\n      this.$count.clear();\r\n      this.$count.setOption({\r\n        tooltip: {\r\n          trigger: \"axis\",\r\n          borderRadius: 6,\r\n          axisPointer: {\r\n            type: \"shadow\",\r\n          },\r\n          formatter: (data) => {\r\n            return formatter(data);\r\n          },\r\n        },\r\n        legend: {\r\n          data: legendData,\r\n        },\r\n        grid: {\r\n          left: \"3%\",\r\n          right: \"6%\",\r\n          bottom: \"3%\",\r\n          containLabel: true,\r\n        },\r\n        xAxis: {\r\n          type: \"category\",\r\n          data: xAxisData,\r\n          axisLabel: {\r\n            fontSize: 12,\r\n            color: \"#8C8C8C\",\r\n          },\r\n        },\r\n        yAxis: yAxis,\r\n        color: [\"#5291EC\", \"#FFC706\", \"#8267DB\", \"#16C06F\", \"#FF6573\"],\r\n        series: data,\r\n      });\r\n    },\r\n    drawNewMixCount(opt = this.option) {\r\n      const {\r\n        legendData = [],\r\n        xAxisData = [],\r\n        data = [],\r\n        yAxis = {},\r\n        formatter = (res) => {\r\n          return \"\";\r\n        },\r\n      } = opt;\r\n      console.log(data);\r\n      formatter;\r\n      let colorList = [\"#FF981F\", \"#5291ec\"];\r\n      let _data;\r\n      _data = data.map((v, i) => {\r\n        return {\r\n          name: v.name,\r\n          type: \"line\",\r\n          symbolSize: \"7\",\r\n          smooth: true,\r\n          showAllSymbol: true,\r\n          hoverAnimation: false,\r\n          yAxisIndex: v.yAxisIndex,\r\n          data: v.data.map((_v, _i) => {\r\n            const week = xAxisData ? moment(xAxisData[_i]).format(\"E\") : 0;\r\n            return {\r\n              value: _v,\r\n              symbol: week === \"6\" || week === \"7\" ? \"circle\" : \"emptyCircle\",\r\n            };\r\n          }),\r\n          itemStyle:\r\n            data.length == 1\r\n              ? {\r\n                  color: \"#FF981F\",\r\n                }\r\n              : data.length == 2\r\n              ? { color: colorList[i] }\r\n              : {},\r\n        };\r\n      });\r\n      console.log(_data);\r\n      this.$count.clear();\r\n      console.log(xAxisData,yAxis);\r\n      this.$count.setOption({\r\n        tooltip: {\r\n          trigger: \"axis\",\r\n          formatter: (data) => {\r\n            return formatter(data);\r\n          },\r\n        },\r\n        legend: {\r\n          data: legendData,\r\n        },\r\n        grid: {\r\n          left: \"3%\",\r\n          right: \"6%\",\r\n          bottom: \"3%\",\r\n          containLabel: true,\r\n        },\r\n        xAxis: {\r\n          type: \"category\",\r\n          data: xAxisData,\r\n          axisLabel: {\r\n            fontSize: 12,\r\n            color: \"#8C8C8C\",\r\n          },\r\n          axisTick: {\r\n            alignWithLabel: true,\r\n          },\r\n        },\r\n        yAxis: yAxis,\r\n        color: [\"#FFC706\", \"#5291EC\", \"#8267DB\", \"#16C06F\", \"#FF6573\"],\r\n        series: _data,\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.count-wrap {\r\n  background-color: #fff;\r\n  margin-top: 20px;\r\n  padding: 20px 0;\r\n\r\n  .count-option {\r\n    position: relative;\r\n    min-height: 40px;\r\n    margin-bottom: 30px;\r\n\r\n    .cetent {\r\n      display: flex;\r\n      position: absolute;\r\n      width: 300px;\r\n      top: 0;\r\n      left: 50%;\r\n      transform: translateX(-50%);\r\n    }\r\n\r\n    .extra {\r\n      position: absolute;\r\n      right: 20px;\r\n      top: 0;\r\n      font-size: 12px;\r\n      text-align: right;\r\n      display: flex;\r\n      align-items: center;\r\n\r\n      .tag {\r\n        display: flex;\r\n        align-items: center;\r\n\r\n        .tag-item + .tag-item {\r\n          margin-left: 4px;\r\n        }\r\n\r\n        .tag-item {\r\n          display: flex;\r\n          align-items: center;\r\n\r\n          .name {\r\n            font-weight: bold;\r\n            margin-right: 2px;\r\n            font-size: 14px;\r\n          }\r\n        }\r\n      }\r\n\r\n      .tags {\r\n        position: absolute;\r\n        bottom: -110px;\r\n        right: 0;\r\n        min-width: 460px;\r\n\r\n        .tag-item + .tag-item {\r\n          margin-left: 4px;\r\n        }\r\n\r\n        .tag-item {\r\n          display: flex;\r\n          align-items: center;\r\n\r\n          .name {\r\n            font-weight: bold;\r\n            margin-right: 2px;\r\n            font-size: 14px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    /deep/.el-col {\r\n      .el-form-item {\r\n        width: 100%;\r\n        display: flex;\r\n        padding: 0 20px;\r\n\r\n        .el-form-item__content {\r\n          flex: 1;\r\n          text-align: left;\r\n\r\n          .el-select {\r\n            width: 100%;\r\n          }\r\n\r\n          .el-range-editor.el-input__inner {\r\n            width: 100%;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=504f9ee7&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=504f9ee7&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"504f9ee7\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_c('FilterLayout',{on:{\"onSubmit\":_vm.onSubmit},model:{value:(_vm.searchForm),callback:function ($$v) {_vm.searchForm=$$v},expression:\"searchForm\"}},[_c('el-col',{attrs:{\"md\":12,\"lg\":6,\"sm\":24}},[_c('el-form-item',{attrs:{\"label\":\"时间\",\"prop\":\"time\"}},[_c('dataPicker',{attrs:{\"datevalue\":_vm.searchForm.time},on:{\"update:datevalue\":function($event){return _vm.$set(_vm.searchForm, \"time\", $event)}}})],1)],1)],1),_c('CountLayout',{attrs:{\"option\":_vm.countData.data,\"loading\":_vm.countData.loading,\"countInfoArr\":_vm.countData.totalInfo,\"type\":\"newMix\"},scopedSlots:_vm._u([{key:\"option\",fn:function(){return [_c('el-col',{attrs:{\"md\":5,\"sm\":8}},[_c('el-form-item',{attrs:{\"label\":\"指标\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\",\"popper-append-to-body\":false},on:{\"change\":_vm.changeComparisonKey},model:{value:(_vm.select_data),callback:function ($$v) {_vm.select_data=$$v},expression:\"select_data\"}},_vm._l((_vm.targetList),function(v,i){return _c('el-option',{key:i,attrs:{\"disabled\":v.id == _vm.select_data_copy,\"label\":v.title,\"value\":v.id}})}),1)],1)],1),_c('el-col',{attrs:{\"md\":2,\"sm\":8}},[_c('el-checkbox',{staticStyle:{\"margin-left\":\"20px\"},on:{\"change\":_vm.changeCheck},model:{value:(_vm.checked),callback:function ($$v) {_vm.checked=$$v},expression:\"checked\"}},[_vm._v(\"指标对比\")])],1),(_vm.checked)?_c('el-col',{attrs:{\"md\":5,\"sm\":8}},[_c('el-form-item',{attrs:{\"label\":\"对比指标\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\",\"popper-append-to-body\":false},on:{\"change\":_vm.changeComparisonKeyCopy},model:{value:(_vm.select_data_copy),callback:function ($$v) {_vm.select_data_copy=$$v},expression:\"select_data_copy\"}},_vm._l((_vm.targetList),function(v,i){return _c('el-option',{key:i,attrs:{\"disabled\":v.id == _vm.select_data,\"label\":v.title,\"value\":v.id}})}),1)],1)],1):_vm._e()]},proxy:true},{key:\"extras\",fn:function(){return undefined},proxy:true}])},[_c('div',{staticClass:\"component_title mrg_btn\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"趋势对比\")])]),_c('TableLayout',{attrs:{\"column\":_vm.column,\"data\":_vm.tableData.data,\"total\":_vm.tableData.total,\"loading\":_vm.tableData.loading,\"currentPage\":_vm.tableOpt.currentPage,\"params\":_vm.searchForm,\"author\":\"liuqiang\",\"leadOut\":true,\"leadApi\":\"Operation/lists\",\"alignStyle\":\"center\"},on:{\"sizeChange\":_vm.onSizeChange,\"pageChange\":_vm.onPageChange}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"home\">\r\n    <FilterLayout v-model=\"searchForm\" @onSubmit=\"onSubmit\">\r\n      <el-col :md=\"12\" :lg=\"6\" :sm=\"24\">\r\n        <el-form-item label=\"时间\" prop=\"time\">\r\n          <dataPicker :datevalue.sync=\"searchForm.time\"></dataPicker>\r\n        </el-form-item>\r\n      </el-col>\r\n    </FilterLayout>\r\n\r\n    <CountLayout\r\n      :option=\"countData.data\"\r\n      :loading=\"countData.loading\"\r\n      :countInfoArr=\"countData.totalInfo\"\r\n      type=\"newMix\"\r\n    >\r\n      <div class=\"component_title mrg_btn\" slot=\"title\">趋势对比</div>\r\n      <template #option>\r\n        <el-col :md=\"5\" :sm=\"8\">\r\n          <el-form-item label=\"指标\">\r\n            <el-select\r\n              v-model=\"select_data\"\r\n              placeholder=\"请选择\"\r\n              @change=\"changeComparisonKey\"\r\n              :popper-append-to-body=\"false\"\r\n            >\r\n              <el-option\r\n                :disabled=\"v.id == select_data_copy\"\r\n                v-for=\"(v, i) in targetList\"\r\n                :key=\"i\"\r\n                :label=\"v.title\"\r\n                :value=\"v.id\"\r\n              />\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :md=\"2\" :sm=\"8\">\r\n          <el-checkbox\r\n            style=\"margin-left: 20px\"\r\n            v-model=\"checked\"\r\n            @change=\"changeCheck\"\r\n            >指标对比</el-checkbox\r\n          >\r\n        </el-col>\r\n        <el-col :md=\"5\" :sm=\"8\" v-if=\"checked\">\r\n          <el-form-item label=\"对比指标\">\r\n            <el-select\r\n              v-model=\"select_data_copy\"\r\n              placeholder=\"请选择\"\r\n              @change=\"changeComparisonKeyCopy\"\r\n              :popper-append-to-body=\"false\"\r\n            >\r\n              <el-option\r\n                :disabled=\"v.id == select_data\"\r\n                v-for=\"(v, i) in targetList\"\r\n                :key=\"i\"\r\n                :label=\"v.title\"\r\n                :value=\"v.id\"\r\n              />\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n      </template>\r\n      <template #extras> </template>\r\n    </CountLayout>\r\n\r\n    <TableLayout\r\n      :column=\"column\"\r\n      :data=\"tableData.data\"\r\n      :total=\"tableData.total\"\r\n      :loading=\"tableData.loading\"\r\n      :currentPage=\"tableOpt.currentPage\"\r\n      :params=\"searchForm\"\r\n      author=\"liuqiang\"\r\n      :leadOut=\"true\"\r\n      leadApi=\"Operation/lists\"\r\n      alignStyle=\"center\"\r\n      @sizeChange=\"onSizeChange\"\r\n      @pageChange=\"onPageChange\"\r\n    >\r\n    </TableLayout>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport moment from \"moment\";\r\nimport FilterLayout from \"@/layout/form\";\r\nimport TableLayout from \"@/layout/table\";\r\nimport CountLayout from \"@/layout/count\";\r\n\r\nexport default {\r\n  components: {\r\n    FilterLayout,\r\n    TableLayout,\r\n    CountLayout,\r\n  },\r\n  data() {\r\n    return {\r\n      select_data: 1,\r\n      select_data_copy: \"\",\r\n      checked: false,\r\n      targetList: [],\r\n      tableOpt: {\r\n        currentPage: 1,\r\n        pageSize: 10,\r\n      },\r\n      tableData: {\r\n        data: [],\r\n        total: 0,\r\n        loading: false,\r\n        currentPage: 1,\r\n        pageSize: 10,\r\n      },\r\n      countData: {\r\n        data: {},\r\n        totalInfo: [],\r\n        loading: false,\r\n      },\r\n      searchForm: {\r\n        time: [\r\n          moment().subtract(30, \"d\").format(\"YYYY-MM-DD\"),\r\n          moment().subtract(1, \"d\").format(\"YYYY-MM-DD\"),\r\n        ],\r\n      },\r\n      numKeyArr: [\"appid_active\", \"total_cost\"],\r\n      column: [\r\n        {\r\n          prop: \"date\",\r\n          label: \"日期\",\r\n        },\r\n        {\r\n          prop: \"appid_active\",\r\n          label: \"日活\",\r\n        },\r\n        {\r\n          prop: \"total_cost\",\r\n          label: \"应用运维总成本\",\r\n        },\r\n        {\r\n          prop: \"project_one_active_cost\",\r\n          label: \"千人日活成本（应用）\",\r\n        },\r\n        {\r\n          prop: \"ali_cost\",\r\n          label: \"阿里云成本\",\r\n        },\r\n        {\r\n          prop: \"huawei_cost\",\r\n          label: \"华为云成本\",\r\n        },\r\n        {\r\n          prop: \"tx_cost\",\r\n          label: \"腾讯云成本\",\r\n        },\r\n        {\r\n          prop: \"other_cost\",\r\n          label: \"其他运维成本\",\r\n        },\r\n        {\r\n          prop: \"zhongtai_total_cost\",\r\n          label: \"中台运维成本\",\r\n        },\r\n        {\r\n          prop: \"zhongtai_one_active_cost\",\r\n          label: \"千人日活成本（中台）\",\r\n        },\r\n      ],\r\n      count_data: {},\r\n      count_data_copy: {},\r\n      count_xAxisData: [],\r\n      count_total: \"\",\r\n      count_avg: \"\",\r\n      count_total_copy: \"\",\r\n      count_avg_copy: \"\",\r\n    };\r\n  },\r\n  mounted() {\r\n    this.fetchList();\r\n    this.getfetchList();\r\n  },\r\n  methods: {\r\n    async fetchList() {\r\n      const { searchForm, tableOpt } = this;\r\n\r\n      this.tableData.loading = true;\r\n\r\n      const [err, res] = await this.$http.post(\"Operation/lists\", {\r\n        ...tableOpt,\r\n\r\n        timeStart: searchForm[\"time\"][0],\r\n        timeEnd: searchForm[\"time\"][1],\r\n      });\r\n\r\n      this.tableData.loading = false;\r\n\r\n      if (err) return;\r\n\r\n      const { data, currentPage, total, total_avg, total_sum } = res;\r\n      data.forEach((item) => {\r\n        for (const key in item) {\r\n          if (this.numKeyArr.indexOf(key) >= 0 && item[key]) {\r\n            item[key] = parseFloat(item[key]).toLocaleString();\r\n          }\r\n        }\r\n        item.date = moment(item.date).format(\"YYYY-MM-DD\");\r\n      });\r\n      for (const key in total_sum) {\r\n        if (this.numKeyArr.indexOf(key) >= 0 && total_sum[key]) {\r\n          total_sum[key] = parseFloat(total_sum[key]).toLocaleString();\r\n        }\r\n      }\r\n      for (const key in total_avg) {\r\n        if (this.numKeyArr.indexOf(key) >= 0 && total_avg[key]) {\r\n          total_avg[key] = parseFloat(total_avg[key]).toLocaleString();\r\n        }\r\n      }\r\n      let all = {};\r\n      let mean = {};\r\n      this.column.forEach((item) => {\r\n        all[item.prop] = total_sum[item.prop];\r\n        mean[item.prop] = total_avg[item.prop];\r\n      });\r\n      all.date = \"总值\";\r\n      mean.date = \"均值\";\r\n      this.tableData.data = [all, mean, ...data];\r\n      this.tableData.currentPage = currentPage;\r\n      this.tableData.total = total;\r\n      this.sumList = total_sum;\r\n      this.avgList = total_avg;\r\n    },\r\n    async fetchCount(val) {\r\n      let valData = \"\";\r\n      this.targetList.forEach((item) => {\r\n        if (item.id == val) {\r\n          valData = item.filed;\r\n        }\r\n      });\r\n      const [err, res] = await this.$http.post(\"Operation/TheLineChart\", {\r\n        timeStart: this.searchForm[\"time\"][0],\r\n        timeEnd: this.searchForm[\"time\"][1],\r\n        target_id: this.select_data,\r\n      });\r\n      if (err) return;\r\n      const { list, avg, total } = res;\r\n      let xAxisData = [];\r\n      let newList = list.map((item) => {\r\n        return item[valData];\r\n      });\r\n      const _data = {\r\n        data: newList,\r\n        name: \"日活\",\r\n        type: \"line\",\r\n      };\r\n      list.forEach((item) => {\r\n        xAxisData.push(moment(item.date).format(\"YYYY-MM-DD\"));\r\n      });\r\n      let yAxis = [\r\n        {\r\n          type: \"value\",\r\n          name: \"日活\",\r\n          min: 0,\r\n          splitLine: {\r\n            lineStyle: {\r\n              type: \"dashed\",\r\n            },\r\n          },\r\n        },\r\n      ];\r\n      this.count_data = _data;\r\n      this.count_xAxisData = xAxisData;\r\n      this.countData.data = {\r\n        legendData: [_data],\r\n        xAxisData: xAxisData,\r\n        data: [_data],\r\n        yAxis,\r\n        formatter: (res) => {\r\n          let html = `${res[0].axisValueLabel}<br/>`;\r\n          res.forEach((v) => {\r\n            html += `${v.marker}${v.seriesName}：${\r\n              this.numKeyArr.indexOf(v.seriesName) >= 0\r\n                ? parseFloat(v.value).toLocaleString()\r\n                : v.value\r\n            }<br/>`;\r\n          });\r\n          return html;\r\n        },\r\n      };\r\n      this.countData.totalInfo = [\r\n        {\r\n          name: \"日活\",\r\n          total,\r\n          avg,\r\n        },\r\n      ];\r\n    },\r\n    async getfetchList() {\r\n      const [err, res] = await this.$http.post(\"Operation/targetList\");\r\n      if (err) return;\r\n      this.targetList = res;\r\n      this.select_data = 1;\r\n      this.fetchCount(1);\r\n    },\r\n    onSubmit() {\r\n      this.tableOpt.currentPage = 1;\r\n      this.fetchList();\r\n      if (this.checked) {\r\n        this.changeComparisonKey(this.select_data);\r\n        this.changeComparisonKeyCopy(this.select_data_copy);\r\n      } else {\r\n        this.changeComparisonKey(this.select_data);\r\n      }\r\n    },\r\n    onPageChange(current) {\r\n      this.tableOpt.currentPage = current;\r\n      this.fetchList();\r\n    },\r\n    onSizeChange(current) {\r\n      this.tableOpt.pageSize = current;\r\n      this.fetchList();\r\n    },\r\n    async changeComparisonKey(val) {\r\n      let filData = this.targetList.filter((item) => {\r\n        return val == item.id;\r\n      });\r\n      let filData_copy = this.targetList.filter((item) => {\r\n        return this.select_data_copy == item.id;\r\n      });\r\n\r\n      let valData = \"\";\r\n      this.targetList.forEach((item) => {\r\n        if (item.id == val) {\r\n          valData = item.filed;\r\n        }\r\n      });\r\n      const [err, res] = await this.$http.post(\"Operation/TheLineChart\", {\r\n        timeStart: this.searchForm[\"time\"][0],\r\n        timeEnd: this.searchForm[\"time\"][1],\r\n        target_id: this.select_data,\r\n      });\r\n      if (err) return;\r\n      const { list, total, avg } = res;\r\n      let xAxisData = [];\r\n      let newList = list.map((item) => {\r\n        return item[valData];\r\n      });\r\n      const _data = {\r\n        data: newList,\r\n        name: filData[0].title,\r\n        type: \"line\",\r\n      };\r\n      list.forEach((item) => {\r\n        xAxisData.push(moment(item.date).format(\"YYYY-MM-DD\"));\r\n      });\r\n      let yAxis = this.checked\r\n        ? [\r\n            {\r\n              type: \"value\",\r\n              name: filData[0].title,\r\n              min: 0,\r\n              splitLine: {\r\n                lineStyle: {\r\n                  type: \"dashed\",\r\n                },\r\n              },\r\n            },\r\n            {\r\n              type: \"value\",\r\n              name: filData_copy[0].title,\r\n              min: 0,\r\n              splitLine: {\r\n                lineStyle: {\r\n                  type: \"dashed\",\r\n                },\r\n              },\r\n            },\r\n          ]\r\n        : [\r\n            {\r\n              type: \"value\",\r\n              name: filData[0].title,\r\n              min: 0,\r\n              splitLine: {\r\n                lineStyle: {\r\n                  type: \"dashed\",\r\n                },\r\n              },\r\n            },\r\n          ];\r\n      this.count_data = _data;\r\n      this.count_xAxisData = xAxisData;\r\n      this.count_total = total;\r\n      this.count_avg = avg;\r\n      this.countData.data = {\r\n        legendData: this.checked ? [_data, this.count_data_copy] : [_data],\r\n        xAxisData: xAxisData,\r\n        data: this.checked ? [_data, this.count_data_copy] : [_data],\r\n        yAxis,\r\n        formatter: (res) => {\r\n          let html = `${res[0].axisValueLabel}<br/>`;\r\n          res.forEach((v) => {\r\n            html += `${v.marker}${v.seriesName}：${\r\n              this.numKeyArr.indexOf(v.seriesName) >= 0\r\n                ? parseFloat(v.value).toLocaleString()\r\n                : v.value\r\n            }<br/>`;\r\n          });\r\n          return html;\r\n        },\r\n      };\r\n      this.checked\r\n        ? (this.countData.totalInfo = [\r\n            {\r\n              name: filData[0].title,\r\n              total,\r\n              avg,\r\n            },\r\n            {\r\n              name: filData_copy[0].title,\r\n              total: this.count_total_copy,\r\n              avg: this.count_avg_copy,\r\n            },\r\n          ])\r\n        : (this.countData.totalInfo = [\r\n            {\r\n              name: filData[0].title,\r\n              total,\r\n              avg,\r\n            },\r\n          ]);\r\n    },\r\n    async changeComparisonKeyCopy(val) {\r\n      let filData = this.targetList.filter((item) => {\r\n        return val == item.id;\r\n      });\r\n      let filData_copy = this.targetList.filter((item) => {\r\n        return this.select_data == item.id;\r\n      });\r\n      let valData = \"\";\r\n      this.targetList.forEach((item) => {\r\n        if (item.id == val) {\r\n          valData = item.filed;\r\n        }\r\n      });\r\n      const [err, res] = await this.$http.post(\"Operation/TheLineChart\", {\r\n        timeStart: this.searchForm[\"time\"][0],\r\n        timeEnd: this.searchForm[\"time\"][1],\r\n        target_id: this.select_data_copy,\r\n      });\r\n      if (err) return;\r\n      const { list, total, avg } = res;\r\n      this.count_total_copy = total;\r\n      this.count_avg_copy = avg;\r\n      let xAxisData = [];\r\n      let newList = list.map((item) => {\r\n        return item[valData];\r\n      });\r\n      const _data = {\r\n        data: newList,\r\n        name: filData[0].title,\r\n        type: \"line\",\r\n      };\r\n      list.forEach((item) => {\r\n        xAxisData.push(moment(item.date).format(\"YYYY-MM-DD\"));\r\n      });\r\n      let yAxis = [\r\n        {\r\n          type: \"value\",\r\n          name: filData_copy[0].title,\r\n          min: 0,\r\n          splitLine: {\r\n            lineStyle: {\r\n              type: \"dashed\",\r\n            },\r\n          },\r\n        },\r\n        {\r\n          type: \"value\",\r\n          name: filData[0].title,\r\n          min: 0,\r\n          splitLine: {\r\n            lineStyle: {\r\n              type: \"dashed\",\r\n            },\r\n          },\r\n        },\r\n      ];\r\n      this.count_data_copy = _data;\r\n      this.countData.data = {\r\n        legendData: [this.count_data, _data],\r\n        xAxisData: xAxisData,\r\n        data: [this.count_data, _data],\r\n        yAxis,\r\n        formatter: (res) => {\r\n          let html = `${res[0].axisValueLabel}<br/>`;\r\n          res.forEach((v) => {\r\n            html += `${v.marker}${v.seriesName}：${\r\n              this.numKeyArr.indexOf(v.seriesName) >= 0\r\n                ? parseFloat(v.value).toLocaleString()\r\n                : v.value\r\n            }<br/>`;\r\n          });\r\n          return html;\r\n        },\r\n      };\r\n      this.countData.totalInfo = [\r\n        {\r\n          name: filData_copy[0].title,\r\n          total: this.count_total,\r\n          avg: this.count_avg,\r\n        },\r\n        {\r\n          name: filData[0].title,\r\n          total,\r\n          avg,\r\n        },\r\n      ];\r\n    },\r\n    changeCheck(val) {\r\n      this.select_data_copy = \"\";\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.component_title {\r\n  padding-left: 20px;\r\n  font-weight: bold;\r\n  background: #fff;\r\n}\r\n.mrg_btn {\r\n  margin-bottom: 20px;\r\n}\r\n/deep/.count-wrap .count-option {\r\n  line-height: 40px;\r\n}\r\n</style>","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=6a36764a&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=6a36764a&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6a36764a\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=6a36764a&lang=less&scoped=true&\""],"sourceRoot":""}