(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36560dd8"],{2710:function(e,t,r){"use strict";r("8b24")},"8b24":function(e,t,r){},f928:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page"},[r("el-row",[r("el-col",{attrs:{xl:12,lg:24,xs:24}},[r("el-form",{ref:"form",staticClass:"edit-form",attrs:{model:e.form,rules:e.rule,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"应用名",prop:"appName"}},[r("el-input",{attrs:{maxlength:20},model:{value:e.form.appName,callback:function(t){e.$set(e.form,"appName",t)},expression:"form.appName"}})],1),r("el-form-item",{attrs:{label:"选择平台",prop:"system"}},[r("el-radio-group",{model:{value:e.form.system,callback:function(t){e.$set(e.form,"system",t)},expression:"form.system"}},e._l(e.systemOpt,(function(t,a){return r("el-radio",{key:a,attrs:{label:t.value,disabled:!0,border:""}},[e._v(e._s(t.name))])})),1)],1),"1"==e.form.system?r("el-form-item",{attrs:{label:"包名",prop:"package_name"}},[r("el-input",{attrs:{disabled:""},model:{value:e.form.package_name,callback:function(t){e.$set(e.form,"package_name",t)},expression:"form.package_name"}})],1):e._e(),"1"==e.form.system?r("el-form-item",{attrs:{label:"OAID证书",prop:"secret_key"}},[r("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.form.secret_key,callback:function(t){e.$set(e.form,"secret_key",t)},expression:"form.secret_key"}})],1):e._e(),"1"==e.form.system?r("el-form-item",{attrs:{label:"证书到期时间",prop:"exp_time"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","picker-options":e.pickerOptions},model:{value:e.form.exp_time,callback:function(t){e.$set(e.form,"exp_time",t)},expression:"form.exp_time"}})],1):e._e(),r("el-form-item",{attrs:{label:"选择部门",prop:"department_id"}},[r("el-radio-group",{attrs:{disabled:""},on:{change:e.onChangeDepartment},model:{value:e.form.department_id,callback:function(t){e.$set(e.form,"department_id",t)},expression:"form.department_id"}},e._l(e.department,(function(t,a){return r("el-radio",{key:a,attrs:{label:t.id,border:""}},[e._v(e._s(t.title))])})),1)],1),r("el-form-item",{attrs:{label:"选择项目组",prop:"group_id"}},[r("el-select",{attrs:{placeholder:"请选择项目组",filterable:"",disabled:""},on:{change:e.onChangeProjectList},model:{value:e.form.group_id,callback:function(t){e.$set(e.form,"group_id",t)},expression:"form.group_id"}},e._l(e.group,(function(e){return r("el-option",{key:e.id,attrs:{value:e.id,label:e.title}})})),1)],1),r("el-form-item",{attrs:{label:"选择项目",prop:"project_id"}},[r("el-select",{attrs:{"popper-append-to-body":!1,placeholder:"请选择项目组",filterable:"",disabled:""},model:{value:e.form.project_id,callback:function(t){e.$set(e.form,"project_id",t)},expression:"form.project_id"}},e._l(e.ProjectList,(function(e){return r("el-option",{key:e.id,attrs:{value:e.id,label:e.title}})})),1),r("div",{staticClass:"item-tip"},[e._v("\n            (如没有对应的部门、项目组、项目请联系中台新增)\n          ")])],1),r("el-form-item",{attrs:{label:"备注描述",prop:"adminName"}},[r("el-input",{attrs:{type:"textarea",rows:4},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即编辑")]),r("el-button",{attrs:{type:"danger"},on:{click:e.back}},[e._v("取消编辑")])],1)],1)],1)],1)],1)},i=[],n=(r("8e6e"),r("ac6a"),r("456d"),r("3835")),o=(r("96cf"),r("1da1")),s=r("ade3"),l=r("2f62"),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{staticClass:"el-radio",class:[e.border&&e.radioSize?"el-radio--"+e.radioSize:"",{"is-disabled":e.isDisabled},{"is-focus":e.focus},{"is-bordered":e.border},{"is-checked":e.model===e.label}],attrs:{role:"radio","aria-checked":e.model===e.label,"aria-disabled":e.isDisabled,tabindex:e.tabIndex},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.stopPropagation(),t.preventDefault(),e.model=e.isDisabled?e.model:e.label}}},[r("span",{staticClass:"el-radio__input",class:{"is-disabled":e.isDisabled,"is-checked":e.model===e.label}},[r("span",{staticClass:"el-radio__inner"}),r("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],ref:"radio",staticClass:"el-radio__original",attrs:{type:"radio","aria-hidden":"true",name:e.name,disabled:e.isDisabled,tabindex:"-1",autocomplete:"off"},domProps:{value:e.label,checked:e._q(e.model,e.label)},on:{focus:function(t){e.focus=!0},blur:function(t){e.focus=!1},change:[function(t){e.model=e.label},e.handleChange]}})]),r("span",{staticClass:"el-radio__label",on:{keydown:function(e){e.stopPropagation()}}},[e._t("default"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2)])},c=[];function u(e,t,r){this.$children.forEach(a=>{var i=a.$options.componentName;i===e?a.$emit.apply(a,[t].concat(r)):u.apply(a,[e,t].concat([r]))})}var m={methods:{dispatch(e,t,r){var a=this.$parent||this.$root,i=a.$options.componentName;while(a&&(!i||i!==e))a=a.$parent,a&&(i=a.$options.componentName);a&&a.$emit.apply(a,[t].concat(r))},broadcast(e,t,r){u.call(this,e,t,r)}}},d={name:"ElRadio",mixins:[m],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElRadio",props:{value:{},label:{},disabled:Boolean,name:String,border:Boolean,size:String},data:function(){return{focus:!1}},computed:{isGroup:function(){var e=this.$parent;while(e){if("ElRadioGroup"===e.$options.componentName)return this._radioGroup=e,!0;e=e.$parent}return!1},model:{get:function(){return this.isGroup?this._radioGroup.value:this.value},set:function(e){this.isGroup?this.dispatch("ElRadioGroup","input",[e]):this.$emit("input",e),this.$refs.radio&&(this.$refs.radio.checked=this.model===this.label)}},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},radioSize:function(){var e=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._radioGroup.radioGroupSize||e},isDisabled:function(){return this.isGroup?this._radioGroup.disabled||this.disabled||(this.elForm||{}).disabled:this.disabled||(this.elForm||{}).disabled},tabIndex:function(){return this.isDisabled||this.isGroup&&this.model!==this.label?-1:0}},methods:{handleChange:function(){var e=this;this.$nextTick((function(){e.$emit("change",e.model),e.isGroup&&e.dispatch("ElRadioGroup","handleChange",e.model)}))}}},f=d,b=r("2877"),h=Object(b["a"])(f,p,c,!1,null,null,null),g=h.exports,_=r("c1df"),v=r.n(_);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x={components:{ElRadio:g},data:function(){return{pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()+7776e5}},form:{appName:"",secret_key:"",exp_time:"",system:"",note:"",id:"",department_id:"",group_id:"",project_id:""},rule:{appName:[{required:!0,message:"请输入应用名",trigger:"blur"}],package_name:[{required:!0,message:"请输入包名",trigger:"blur"}],system:[{required:!0,message:"请选择平台",trigger:"blur"}],department_id:[{required:!0,message:"请选择部门",trigger:"blur"}],group_id:[{required:!0,message:"请选择项目组",trigger:"blur"}],project_id:[{required:!0,message:"请选择项目",trigger:"blur"}]},systemOpt:[{name:"Android",value:"1"},{name:"iOS",value:"2"},{name:"微信小程序",value:"3"},{name:"百度小程序",value:"4"},{name:"Web网页",value:"5"}],department:[],group:[],ProjectList:[]}},mounted:function(){this.fetchDetail()},computed:y({},Object(l["d"])({tableData:function(e){return e.user_manage.list}})),methods:y(y({},Object(l["b"])(["addAppManage","getAppManage","getApp"])),{},{fetchDetail:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,i,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.form,r=this.$route.query.id,e.next=4,this.getAppManage({appId:r});case 4:if(a=e.sent,i=Object(n["a"])(a,2),o=i[0],s=i[1],!o){e.next=10;break}return e.abrupt("return");case 10:this.form=y(y({},t),s),this.form.exp_time=s.exp_time?v()(s.exp_time).format("YYYY-MM-DD"):"",this.onFetchDepartment();case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onFetchDepartment:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,i,o,s,l=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.post("/Apartment_Manage/getDepartment");case 2:if(t=e.sent,r=Object(n["a"])(t,2),a=r[0],i=r[1],!a){e.next=8;break}return e.abrupt("return");case 8:this.department=i,o=this.department.filter((function(e){return e.id===l.form.department_id})),this.group=o?o[0].groups:[],s=this.group.filter((function(e){return e.id===l.form.group_id})),this.ProjectList=s?s[0].projects:[];case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onChangeDepartment:function(e){var t=this.department.filter((function(t){return t.id===e}));this.group=t?t[0].groups:[]},onChangeProjectList:function(e){var t=this.group.filter((function(t){return t.id===e}));this.ProjectList=t?t[0].projects:[]},onSubmit:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$refs["form"].validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var a,i,o,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",!1);case 2:return a=t.form,i=a.id,t.form.exp_time=v()(t.form.exp_time).format("YYYY-MM-DD"),console.log(t.form.secret_key),e.next=8,t.addAppManage(y(y({},a),{},{appId:i}));case 8:if(o=e.sent,s=Object(n["a"])(o,2),l=s[0],s[1],!l){e.next=14;break}return e.abrupt("return");case 14:t.$notify.success({title:"提示",message:"编辑成功"}),t.getApp(),t.$router.push("/manage_center/framework");case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),back:function(){this.$router.push({name:"manage_center_framework",params:{index_tab:4}})}})},j=x,w=(r("2710"),Object(b["a"])(j,a,i,!1,null,"7c847365",null));t["default"]=w.exports}}]);
//# sourceMappingURL=chunk-36560dd8.1.0.0.1672021042960.js.map