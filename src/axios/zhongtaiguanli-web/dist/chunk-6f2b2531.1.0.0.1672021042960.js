(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f2b2531"],{4446:function(e,t,r){"use strict";r("544a")},"544a":function(e,t,r){},fe58:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page"},[r("el-row",[r("el-col",{attrs:{xl:14,lg:24,xs:24}},[r("el-form",{ref:"form",staticClass:"edit-form",attrs:{model:e.form,rules:e.rule,"label-width":"130px"}},[r("el-form-item",{attrs:{label:"应用名",prop:"appName"}},[r("el-input",{attrs:{maxlength:20},model:{value:e.form.appName,callback:function(t){e.$set(e.form,"appName",t)},expression:"form.appName"}}),r("div",{staticClass:"item-tip"},[e._v("\n            (如该APP支持多个平台，请务必保证多平台应用名称一致)\n          ")])],1),r("el-form-item",{attrs:{label:"选择平台",prop:"system"}},[r("el-radio-group",{model:{value:e.form.system,callback:function(t){e.$set(e.form,"system",t)},expression:"form.system"}},e._l(e.systemOpt,(function(t,a){return r("el-radio",{key:a,attrs:{label:t.value,border:""}},[e._v(e._s(t.name))])})),1)],1),"1"==e.form.system?r("el-form-item",{attrs:{label:"包名",prop:"package_name"}},[r("el-input",{model:{value:e.form.package_name,callback:function(t){e.$set(e.form,"package_name",t)},expression:"form.package_name"}})],1):e._e(),"1"==e.form.system?r("el-form-item",{attrs:{label:"OAID证书",prop:"secret_key"}},[r("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.form.secret_key,callback:function(t){e.$set(e.form,"secret_key",t)},expression:"form.secret_key"}})],1):e._e(),"1"==e.form.system?r("el-form-item",{attrs:{label:"证书到期时间",prop:"exp_time"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","picker-options":e.pickerOptions},model:{value:e.form.exp_time,callback:function(t){e.$set(e.form,"exp_time",t)},expression:"form.exp_time"}})],1):e._e(),r("el-form-item",{attrs:{label:"选择部门",prop:"department_id"}},[r("el-radio-group",{on:{change:e.onChangeDepartment},model:{value:e.form.department_id,callback:function(t){e.$set(e.form,"department_id",t)},expression:"form.department_id"}},e._l(e.department,(function(t,a){return r("el-radio",{key:a,attrs:{label:t.id,border:""}},[e._v(e._s(t.title))])})),1)],1),r("el-form-item",{attrs:{label:"选择项目组",prop:"group_id"}},[r("el-select",{attrs:{"popper-append-to-body":!1,placeholder:"请选择项目组",filterable:""},on:{change:e.onChangeProjectList},model:{value:e.form.group_id,callback:function(t){e.$set(e.form,"group_id",t)},expression:"form.group_id"}},e._l(e.group,(function(e){return r("el-option",{key:e.id,attrs:{value:e.id,label:e.title}})})),1)],1),r("el-form-item",{attrs:{label:"选择项目",prop:"project_id"}},[r("el-select",{attrs:{"popper-append-to-body":!1,placeholder:"请选择项目组",filterable:""},model:{value:e.form.project_id,callback:function(t){e.$set(e.form,"project_id",t)},expression:"form.project_id"}},e._l(e.ProjectList,(function(e){return r("el-option",{key:e.id,attrs:{value:e.id,label:e.title}})})),1),r("div",{staticClass:"item-tip"},[e._v("\n            (如没有对应的部门、项目组、项目请联系中台新增)\n          ")])],1),r("el-form-item",{attrs:{label:"备注描述",prop:"adminName"}},[r("el-input",{attrs:{type:"textarea",rows:4},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即创建")])],1)],1)],1)],1)],1)},n=[],o=(r("8e6e"),r("ac6a"),r("456d"),r("3835")),i=(r("96cf"),r("1da1")),s=r("ade3"),p=r("2f62"),m=r("c1df"),c=r.n(m);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f={data:function(){return{pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()+7776e5}},form:{appId:"",appName:"",package_name:"",secret_key:"",exp_time:"",system:"",note:"",department_id:"",group_id:"",project_id:""},rule:{appName:[{required:!0,message:"请输入应用名",trigger:"blur"}],package_name:[{required:!0,message:"请输入包名",trigger:"blur"}],secret_key:[{required:!0,message:"请输入证书秘钥",trigger:"blur"}],exp_time:[{required:!0,message:"请输入证书到期时间",trigger:"blur"}],system:[{required:!0,message:"请选择平台",trigger:"blur"}],department_id:[{required:!0,message:"请选择部门",trigger:"blur"}],group_id:[{required:!0,message:"请选择项目组",trigger:"blur"}],project_id:[{required:!0,message:"请选择项目",trigger:"blur"}]},systemOpt:[{name:"Android",value:1},{name:"iOS",value:2},{name:"微信小程序",value:"3"},{name:"抖音小程序",value:"4"},{name:"Web网页",value:"5"}],department:[],group:[],ProjectList:[]}},mounted:function(){this.onFetchDepartment()},computed:u({},Object(p["d"])({tableData:function(e){return e.user_manage.list}})),methods:u(u({},Object(p["b"])(["addAppManage","getApp"])),{},{onChangeDepartment:function(e){var t=this.department.filter((function(t){return t.id===e}));this.form.group_id="",this.group=t?t[0].groups:[]},onChangeProjectList:function(e){var t=this.group.filter((function(t){return t.id===e}));this.form.project_id="",this.ProjectList=t?t[0].projects:[]},onFetchDepartment:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.post("/Apartment_Manage/getDepartment");case 2:if(t=e.sent,r=Object(o["a"])(t,2),a=r[0],n=r[1],!a){e.next=8;break}return e.abrupt("return");case 8:this.department=n;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onSubmit:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$refs["form"].validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(r){var a,n,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",!1);case 2:return 1!=t.form.system&&(t.form.package_name="",t.form.secret_key="",t.form.exp_time=""),t.form.exp_time=c()(t.form.exp_time).format("YYYY-MM-DD"),a=t.form,e.next=7,t.addAppManage(u({},a));case 7:if(n=e.sent,i=Object(o["a"])(n,2),s=i[0],i[1],!s){e.next=14;break}return t.$notify.error({title:"提示",message:s}),e.abrupt("return");case 14:t.$notify.success({title:"提示",message:"添加成功"}),t.getApp(),t.$router.push("/manage_center/framework");case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),changePackageName:function(e){1!==e&&(this.form.package_name="")}})},d=f,g=(r("4446"),r("2877")),b=Object(g["a"])(d,a,n,!1,null,"cbe7a2d4",null);t["default"]=b.exports}}]);
//# sourceMappingURL=chunk-6f2b2531.1.0.0.1672021042960.js.map