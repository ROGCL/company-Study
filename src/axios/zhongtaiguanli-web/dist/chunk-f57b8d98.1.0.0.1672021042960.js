(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f57b8d98"],{"0624":function(e,t,n){"use strict";n("5f59")},"13e1":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("FilterLayout",{on:{onSubmit:e.onSubmit},model:{value:e.searchForm,callback:function(t){e.searchForm=t},expression:"searchForm"}},[n("el-col",{attrs:{md:5,sm:12}},[n("el-form-item",{attrs:{label:"App名称",prop:"appId"}},[n("SelectApp",{model:{value:e.searchForm.appId,callback:function(t){e.$set(e.searchForm,"appId",t)},expression:"searchForm.appId"}})],1)],1),n("el-col",{attrs:{md:5,sm:12}},[n("el-form-item",{attrs:{label:"姓名",prop:"realname"}},[n("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.searchForm.realname,callback:function(t){e.$set(e.searchForm,"realname",t)},expression:"searchForm.realname"}})],1)],1),n("el-col",{attrs:{md:5,sm:12}},[n("el-form-item",{attrs:{label:"筛选",prop:"search"}},[n("el-input",{attrs:{placeholder:"请输入账号/邮箱/手机号"},model:{value:e.searchForm.search,callback:function(t){e.$set(e.searchForm,"search",t)},expression:"searchForm.search"}})],1)],1),n("el-col",{attrs:{md:5,sm:12}},[n("el-form-item",{attrs:{label:"筛选身份",prop:"isAdmin"}},[n("el-select",{attrs:{"popper-append-to-body":!1,placeholder:"请选择"},model:{value:e.searchForm.isAdmin,callback:function(t){e.$set(e.searchForm,"isAdmin",t)},expression:"searchForm.isAdmin"}},[n("el-option",{attrs:{label:"全部",value:""}}),n("el-option",{attrs:{label:"管理员",value:"2"}}),n("el-option",{attrs:{label:"普通用户",value:"3"}})],1)],1)],1)],1),n("TableLayout",{attrs:{column:e.column,data:e.tableData.data,total:e.tableData.total,loading:e.tableData.loading,currentPage:e.tableOpt.currentPage},on:{sizeChange:e.onSizeChange,pageChange:e.onPageChange},scopedSlots:e._u([{key:"table-option",fn:function(){return[n("el-button",{attrs:{type:"danger",icon:"el-icon-plus"},on:{click:e.onAdd}},[e._v("添加")]),e.CountNoCheck&&-1!==e.indexFlag?n("el-badge",{staticClass:"item",staticStyle:{"margin-left":"20px"},attrs:{value:e.CountNoCheck}},[n("el-button",{attrs:{type:"primary"},on:{click:e.onLogin_list}},[e._v("登录授权管理")])],1):e._e(),e.CountNoCheck||-1===e.indexFlag?e._e():n("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.onLogin_list}},[e._v("登录授权管理")])]},proxy:!0},{key:"manage_level",fn:function(t){return[e._v(e._s(e.formatLevel(t.row.manage_level)))]}},{key:"option",fn:function(t){return[n("el-button-group",{staticStyle:{display:"flex","justify-content":"space-between"}},[n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(n){return e.onLinkTo(t,"/manage_center/user_manage/edit_auth")}}},[e._v("权限分配")]),n("el-dropdown",{attrs:{"split-button":"",type:"primary",icon:"el-icon-edit"},on:{click:function(n){return e.onLinkTo(t,"/manage_center/user_manage/edit")},command:function(n){return e.onClickDropdown(n,t)}}},[e._v("\n          修改信息\n          "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"reset"}},[e._v("重置密码")]),-1!==e.indexFlag?n("el-dropdown-item",{attrs:{command:"login"}},[e._v("登录管理")]):e._e(),n("el-dropdown-item",{attrs:{command:"delete"}},[e._v("删除")])],1)],1)],1)]}}])}),n("el-dialog",{attrs:{visible:e.dialogVisible,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",{staticClass:"login_info_btn"},[n("span",{staticStyle:{"padding-right":"30px"}},[e._v("登录时需插件校验")]),n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"开","inactive-text":"关"},on:{change:e.changeBtn},model:{value:e.login_flag,callback:function(t){e.login_flag=t},expression:"login_flag"}},[e._v("\n        >\n      ")])],1),n("div",{staticStyle:{"margin-top":"20px"}},[n("div",{staticStyle:{padding:"5px 0"}},[e._v("已授权插件：")]),n("div",{staticStyle:{padding:"0px 10px",background:"rgb(242 242 242)"}},e._l(e.UserAuthMacList,(function(t,r){return n("div",{key:r,staticStyle:{display:"flex","justify-content":"space-between",padding:"10px 0"}},[n("span",[e._v(e._s(t.mac_no))]),n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.deleteLogin(t)}}},[e._v("删除")])],1)})),0)])])],1)},a=[],i=(n("8e6e"),n("ac6a"),n("456d"),n("3835")),o=(n("96cf"),n("1da1")),s=n("ade3"),c=n("cff8"),l=n.n(c),u=n("2f62"),p=n("5b78"),h=n("a3be"),d=n("2b38"),f=n("bb8b"),m=n("ebe6");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={name:"home",components:{FilterLayout:d["a"],TableLayout:f["a"],SelectApp:m["a"]},data:function(){return{indexFlag:-1,CountNoCheck:0,UserAuthMacList:[],user_id:"",dialogVisible:!1,searchForm:{appId:"",search:"",realname:"",isAdmin:""},admin_id:"",column:[{prop:"name",label:"账号"},{prop:"realname",label:"真实姓名"},{prop:"phone",label:"手机号"},{prop:"email",label:"邮箱"},{prop:"from_user",label:"添加账号"},{prop:"manage_level",label:"身份",width:"120px"},{prop:"option",label:"操作",width:"300px"}],tableOpt:{currentPage:1,pageSize:10},showDelete:!1,login_flag:!0}},mounted:function(){this.fetchData();var e=l.a.get("menu");this.indexFlag=e.indexOf("144"),this.getCountNoCheck(),this.admin_id=JSON.parse(localStorage.getItem("user")).id},computed:b({},Object(u["d"])({tableData:function(e){return e.user_manage.list},App:function(e){return e.app.data}})),beforeDestroy:function(){this["REMOVE_BREADCRUMB"]()},methods:b(b(b({},Object(u["c"])(["UPDATE_USER","UPDATE_BREADCRUMB","REMOVE_BREADCRUMB"])),Object(u["b"])(["getUserManageList","removeUserManage"])),{},{fetchData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.searchForm,n=this.tableOpt,e.next=3,this.getUserManageList(b(b({},t),n));case 3:if(r=e.sent,a=Object(i["a"])(r,2),o=a[0],a[1],!o){e.next=9;break}return e.abrupt("return");case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onSubmit:function(e){this.tableOpt.currentPage=1,this.fetchData(!0)},onPageChange:function(e){this.tableOpt.currentPage=e,this.fetchData()},onSizeChange:function(e){this.tableOpt.pageSize=e,this.fetchData()},onAdd:function(){this.$router.push("/manage_center/user_manage/add")},onLogin_list:function(){this.$router.push("/manage_center/user_manage/login_list")},onClickDropdown:function(e,t){"reset"===e&&this.onReset(t),"delete"===e&&this.onDelete(t),"login"===e&&this.onLoginInfo(t)},onLinkTo:function(e,t){var n=e.row;this["UPDATE_BREADCRUMB"]('<span style="font-size:15px">操作对象：'.concat(n.realname,"</span>")),this.$router.push({path:t,query:{id:n.id}})},onDelete:function(e){var t=this,n=e.row;this.$confirm("确认删除该账号？","提示").then(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var a,o,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.id,e.next=3,t.removeUserManage({adminId:a});case 3:if(o=e.sent,s=Object(i["a"])(o,2),c=s[0],s[1],!c){e.next=10;break}return t.$message({showClose:!0,message:c,type:"error"}),e.abrupt("return");case 10:t.$message({showClose:!0,message:"删除成功",type:"success"}),t.onSubmit(),thMac;case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))},onLoginInfo:function(e){console.log(e),this.login_flag="1"===e.row.is_check,this.user_id=e.row.id,this.dialogVisible=!0,this.getUserAuthMac()},getCountNoCheck:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.post("admin/count_no_check");case 2:if(t=e.sent,n=Object(i["a"])(t,2),r=n[0],a=n[1],!r){e.next=8;break}return e.abrupt("return");case 8:console.log(a),this.CountNoCheck=a.count;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getUserAuthMac:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.post("admin/user_auth_mac",{user_id:this.user_id});case 2:if(t=e.sent,n=Object(i["a"])(t,2),r=n[0],a=n[1],!r){e.next=8;break}return e.abrupt("return");case 8:console.log(a.list),this.UserAuthMacList=a.list;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),changeBtn:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t),this.$confirm("确定更改当前用户插件校验状态？").then(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.$http.post("admin/mac_open",{user_id:n.user_id,is_check:n.login_flag?"1":"0"});case 2:if(r=e.sent,a=Object(i["a"])(r,2),o=a[0],a[1],!o){e.next=8;break}return e.abrupt("return");case 8:n.fetchData();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){n.login_flag=!n.login_flag}));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),deleteLogin:function(e){var t=this;this.$confirm("确认删除该授权插件？","提示").then(function(){var n=Object(o["a"])(regeneratorRuntime.mark((function n(r){var a,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$http.post("admin/del_mac",{mac_no:e.mac_no,id:e.id});case 2:if(a=n.sent,o=Object(i["a"])(a,2),s=o[0],o[1],!s){n.next=9;break}return t.$message({showClose:!0,message:s,type:"error"}),n.abrupt("return");case 9:t.$message({showClose:!0,message:"删除成功",type:"success"}),t.getUserAuthMac();case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){}))},onReset:function(e){var t=this,n=e.row;this.$confirm("确认重置该账号密码？","提示").then(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var a,o,s,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.id,e.next=3,p["a"].post(h["a"].User.resetPwd,{adminId:a});case 3:if(o=e.sent,s=Object(i["a"])(o,2),c=s[0],l=s[1],!c){e.next=10;break}return t.$message({showClose:!0,message:c,type:"error"}),e.abrupt("return");case 10:n.id==t.admin_id&&(t.$router.push("/login"),t.$router.push({path:"/login"})),t.$message({showClose:!0,message:"重置成功，密码重置为 "+l,type:"success",duration:0});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))},formatLevel:function(e){switch(String(e)){case"":return"--";case"2":return"管理员";case"3":return"普通用户"}}})},y=v,_=(n("0624"),n("2877")),w=Object(_["a"])(y,r,a,!1,null,"42ab6c59",null);t["default"]=w.exports},4654:function(e,t,n){},"59f3":function(e,t,n){"use strict";n("4654")},"5f59":function(e,t,n){},ebe6:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-select",{staticClass:"app-control",attrs:{filterable:"","popper-append-to-body":!1,placeholder:"请选择",disabled:e.disabled,"collapse-tags":"",multiple:e.isMultiple},on:{change:e.onHandleChange},scopedSlots:e._u([{key:"prefix",fn:function(){return[e.systemIcon?n("span",{staticClass:"iconfont",class:e.systemIcon}):e._e()]},proxy:!0}]),model:{value:e.insideValue,callback:function(t){e.insideValue=t},expression:"insideValue"}},[e.haveAll?n("el-option",{attrs:{label:"全部",value:""}}):e._e(),e._l(e.App,(function(t){return n("el-option",{key:t.id,attrs:{value:t.id,label:t.title}},[n("span",{staticClass:"iconfont",class:e.formatSystemIcon(t.system)},[e._v(e._s(t.title))])])}))],2)},a=[],i=(n("8e6e"),n("ac6a"),n("456d"),n("3835")),o=(n("96cf"),n("1da1")),s=(n("7514"),n("ade3")),c=(n("c5f6"),n("2f62"));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={props:{value:{type:[String,Number],default:""},haveAll:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},Multiple:String},data:function(){return{insideValue:[]||!1,list:[],isMultiple:!1}},beforeMount:function(){this.isMultiple="true"===this.Multiple},mounted:function(){this.App.length||this.fetchApp(),this.insideValue=this.value},watch:{value:function(e){this.insideValue=e},insideValue:function(e){this.$emit("input",e)}},computed:u(u({},Object(c["d"])({App:function(e){return e.app.data}})),{},{systemIcon:function(e){var t=e.App,n=e.insideValue,r=t.find((function(e){return e.id===n}));return r?this.formatSystemIcon(r.system):""}}),methods:u(u({},Object(c["b"])(["getApp"])),{},{fetchApp:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getApp();case 2:if(t=e.sent,n=Object(i["a"])(t,2),r=n[0],a=n[1],this.tableData.loading=!1,!r){e.next=9;break}return e.abrupt("return");case 9:this.list=a;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),formatSystemIcon:function(e){switch(String(e)){case"1":return"icon-anzhuo";case"2":return"icon-ios";case"3":return"icon-weixin";case"4":return"icon-baidu";case"5":return"icon-chrome";default:return""}},onHandleChange:function(e){this.$emit("change",e)}})},h=p,d=(n("59f3"),n("2877")),f=Object(d["a"])(h,r,a,!1,null,"6d3b67e3",null);t["a"]=f.exports}}]);
//# sourceMappingURL=chunk-f57b8d98.1.0.0.1672021042960.js.map