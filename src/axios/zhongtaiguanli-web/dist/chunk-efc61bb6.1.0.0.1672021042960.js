(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-efc61bb6"],{"06bb":function(t,e,a){"use strict";a("f122")},"2f21":function(t,e,a){"use strict";var i=a("79e5");t.exports=function(t,e){return!!t&&i((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},3087:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("FilterLayout",{key:t.FilterLayoutkey,attrs:{width:"100px",mdSpan:6,flexFlag:!0},on:{onSubmit:t.onSubmit},model:{value:t.searchForm,callback:function(e){t.searchForm=e},expression:"searchForm"}},[a("div",{staticClass:"component_title2"},[t._v("筛选项")]),a("el-col",{attrs:{md:8,sm:12}},[a("el-form-item",{attrs:{label:"目标时间"}},[a("dataPicker",{attrs:{clearFlag:"",datevalue:t.searchForm.target_time},on:{"update:datevalue":function(e){return t.$set(t.searchForm,"target_time",e)}}})],1)],1),a("el-col",{attrs:{md:8,sm:12}},[a("el-form-item",{attrs:{label:"投放平台",prop:"platform"}},[a("SelectChannel",{attrs:{optionsList:t.Invest_channel,paramFlag:""},model:{value:t.searchForm.invest_channel,callback:function(e){t.$set(t.searchForm,"invest_channel",e)},expression:"searchForm.invest_channel"}})],1)],1),a("el-col",{attrs:{md:8,sm:12}},[a("el-form-item",{attrs:{label:"渠道负责人",prop:"system"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:"",multiple:"","collapse-tags":"",filterable:""},model:{value:t.searchForm.admin_id,callback:function(e){t.$set(t.searchForm,"admin_id",e)},expression:"searchForm.admin_id"}},t._l(t.allAdmin,(function(t){return a("el-option",{key:t.id,attrs:{label:t.realname,value:t.id}})})),1)],1)],1),a("el-col",{attrs:{md:8,sm:12}},[a("el-form-item",{attrs:{label:"应用",prop:"appid"}},[a("SelectCustomize",{attrs:{value:t.searchForm.appid,data:t.apps}})],1)],1),a("el-col",{attrs:{md:8,sm:12}},[a("el-form-item",{attrs:{label:"目标添加人",prop:"system"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:"",multiple:"","collapse-tags":"",filterable:""},model:{value:t.searchForm.target_admin,callback:function(e){t.$set(t.searchForm,"target_admin",e)},expression:"searchForm.target_admin"}},t._l(t.allAdmin,(function(t){return a("el-option",{key:t.id,attrs:{label:t.realname,value:t.id}})})),1)],1)],1),a("el-col",{attrs:{md:8,sm:12}},[a("el-form-item",{attrs:{label:"添加时间"}},[a("dataPicker",{ref:"dataPicker",attrs:{clearFlag:"",datevalue:t.searchForm.create_time},on:{"update:datevalue":function(e){return t.$set(t.searchForm,"create_time",e)}}})],1)],1),a("el-button",{on:{click:t.initFrom}},[t._v(" 重置")]),a("el-button",{attrs:{slot:"more_option",type:"primary"},on:{click:t.add},slot:"more_option"},[t._v("新增")]),a("el-button",{attrs:{slot:"more_option",type:"primary"},on:{click:t.uploadClick},slot:"more_option"},[t._v("批量上传")])],1),a("TableLayout",{ref:"TableLayout",attrs:{column:t.column,data:t.tableData.data,total:t.tableData.total,loading:t.tableData.loading,currentPage:t.tableData.currentPage,alignStyle:"center",author:"liuqiang",leadApi:"Operate_Invest/lists"},on:{sizeChange:t.onSizeChange,pageChange:t.onPageChange},scopedSlots:t._u([{key:"target_roi",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.target_roi)+"% ")]}},{key:"operate",fn:function(e){var i=e.row;return[a("div",[a("el-link",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:function(e){return t.edit(i)}}},[t._v("修改")]),a("el-link",{attrs:{type:"danger"},on:{click:function(e){return t.del(i.id)}}},[t._v("删除")])],1)]}}])},[a("div",{staticClass:"component_title",attrs:{slot:"title"},slot:"title"},[t._v("数据报表")])]),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.add_loading,expression:"add_loading"}],attrs:{title:"投放目标"+(1==t.type?"新增":"编辑"),visible:t.dialogFormVisible,width:"400px","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{key:t.FilterLayoutkey,ref:"ruleForm",attrs:{model:t.addForm,rules:t.rules}},[a("el-form-item",{attrs:{label:"开始时间","label-width":"100px",required:"",prop:"time_begin"}},[a("el-date-picker",{staticClass:"input",attrs:{disabled:1!=t.type,type:"date",placeholder:"选择日期"},on:{change:function(e){return t.dateChange(e,1)}},model:{value:t.addForm.time_begin,callback:function(e){t.$set(t.addForm,"time_begin",e)},expression:"addForm.time_begin"}})],1),a("el-form-item",{attrs:{label:"结束时间","label-width":"100px",required:"",prop:"time_end"}},[a("el-date-picker",{staticClass:"input",attrs:{disabled:1!=t.type,type:"date",placeholder:"选择日期"},on:{change:function(e){return t.dateChange(e,2)}},model:{value:t.addForm.time_end,callback:function(e){t.$set(t.addForm,"time_end",e)},expression:"addForm.time_end"}})],1),a("el-form-item",{attrs:{label:"投放平台","label-width":"100px",required:"",prop:"invest_channel_id"}},[a("el-cascader",{staticClass:"input",attrs:{options:t.Invest_channel,props:{value:"id",label:"title"}},model:{value:t.addForm.invest_channel_id,callback:function(e){t.$set(t.addForm,"invest_channel_id",e)},expression:"addForm.invest_channel_id"}})],1),a("el-form-item",{attrs:{label:"渠道负责人","label-width":"100px",required:"",prop:"admin_id"}},[a("el-select",{staticClass:"input",attrs:{placeholder:"请选择",clearable:""},model:{value:t.addForm.admin_id,callback:function(e){t.$set(t.addForm,"admin_id",e)},expression:"addForm.admin_id"}},t._l(t.allAdmin,(function(t){return a("el-option",{key:t.id,attrs:{label:t.realname,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"应用","label-width":"100px",required:"",prop:"app_id"}},[a("el-select",{staticClass:"input",attrs:{placeholder:"请选择",clearable:""},model:{value:t.addForm.app_id,callback:function(e){t.$set(t.addForm,"app_id",e)},expression:"addForm.app_id"}},t._l(t.apps,(function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"消耗目标","label-width":"100px"}},[a("div",{staticClass:"form-item-div"},[a("el-input",{staticClass:"input",attrs:{onkeyup:"value=value.replace(/[^\\x00-\\xff]/g, '')",autocomplete:"off"},model:{value:t.addForm.target_amount,callback:function(e){t.$set(t.addForm,"target_amount",e)},expression:"addForm.target_amount"}}),a("span",[t._v(" （元） ")])],1)]),a("el-form-item",{attrs:{label:"回收目标","label-width":"100px"}},[a("div",{staticClass:"form-item-div"},[a("el-input",{staticClass:"input",attrs:{onkeyup:"value=value.replace(/[^\\x00-\\xff]/g, '')",autocomplete:"off"},model:{value:t.addForm.target_recycling,callback:function(e){t.$set(t.addForm,"target_recycling",e)},expression:"addForm.target_recycling"}}),a("span",[t._v(" （元） ")])],1)]),a("el-form-item",{attrs:{label:"新增目标","label-width":"100px"}},[a("el-input",{staticClass:"input",attrs:{onkeyup:"value=value.replace(/[^\\x00-\\xff]/g, '')",autocomplete:"off"},model:{value:t.addForm.target_device_new,callback:function(e){t.$set(t.addForm,"target_device_new",e)},expression:"addForm.target_device_new"}})],1),a("el-form-item",{attrs:{label:"订单量目标","label-width":"100px"}},[a("el-input",{staticClass:"input",attrs:{onkeyup:"value=value.replace(/[^\\x00-\\xff]/g, '')",autocomplete:"off"},model:{value:t.addForm.target_order_num,callback:function(e){t.$set(t.addForm,"target_order_num",e)},expression:"addForm.target_order_num"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.dialogFormVisibleConfirm}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"目标批量上传",visible:t.uploadVisible,width:"600px","close-on-click-modal":!1},on:{"update:visible":function(e){t.uploadVisible=e}}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{"file-list":t.fileList,accept:".xls, .xlsx, .docx",name:"excel",drag:"","on-change":t.uploadchange,"auto-upload":!1,multiple:"",data:t.uploadParams,action:t.uploadUrl2,"on-success":t.onSuccess,"on-error":t.onError},on:{"before-upload":t.beforeUpload}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("\n        支持扩展名：.xls .xlsx .docx\n      ")])]),a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitUpload}},[t._v("确定")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onDown("http://madmin.cqdingyan.com/download/%E6%8A%95%E6%94%BE%E7%9B%AE%E6%A0%87%E6%A8%A1%E6%9D%BF.xlsx")}}},[t._v("下载上传模板")])],1)],1)],1)},n=[],r=(a("c5f6"),a("20d6"),a("28a5"),a("7f7f"),a("ac6a"),a("3835")),l=(a("96cf"),a("1da1")),s={data:function(){return{column:[{label:"开始时间",prop:"date_b",fixed:!1},{label:"结束时间",prop:"date_e",fixed:!1},{label:"投放平台",prop:"invest_channel_name",fixed:!1},{label:"应用",prop:"app_name",fixed:!1},{label:"渠道负责人",prop:"admin_name",fixed:!1},{label:"消耗目标（元）",prop:"target_amount",fixed:!1},{label:"回收目标（元）",prop:"target_recycling",fixed:!1},{label:"新增目标",prop:"target_device_new",fixed:!1},{label:"订单量目标",prop:"target_order_num",fixed:!1},{label:"目标添加人",prop:"target_admin_name",fixed:!1},{label:"添加时间",prop:"create_time",width:150,fixed:!1},{label:"操作",prop:"operate",width:100,fixed:!1}]}}},o=a("2b38"),c=a("bb8b"),u=a("73a1"),d=a("bbb5"),p=a("c1df"),h=a.n(p),m=a("cff8"),f=a.n(m),g=a("2ef0"),_=a.n(g),b=(a("bc3a"),{mixins:[s],components:{FilterLayout:o["a"],TableLayout:c["a"],SelectCustomize:u["a"],SelectChannel:d["a"]},data:function(){return{apps:[],FilterLayoutkey:1,add_loading:!1,uploadVisible:!1,dialogFormVisible:!1,type:1,searchForm:{appid:{appInfo:[]},target_time:[h()().subtract(7,"d").format("YYYY-MM-DD"),h()().subtract(1,"d").format("YYYY-MM-DD")],create_time:[],admin_id:[],invest_channel:[],target_admin:[]},uploadUrl2:"".concat("/Admin","/File/uploadTarget"),uploadParams:{appId:this.$route.query.appId,loginId:f.a.get("user")["id"],loginToken:f.a.get("loginToken")},addForm:{app_id:"",time_begin:"",time_end:"",invest_channel_id:"",admin_id:"",target_amount:"",target_recycling:"",target_device_new:"",target_order_num:""},rules:{time_begin:[{required:!0,message:"请选择开始时间",trigger:"blur"}],time_end:[{required:!0,message:"请选择结束时间",trigger:"blur"}],invest_channel_id:[{required:!0,message:"请选择投放平台",trigger:["change","blur"]}],app_id:[{required:!0,message:"请选择应用",trigger:["change","blur"]}],admin_id:[{required:!0,message:"请选择渠道负责人",trigger:["change","blur"]}]},tableData:{data:[],total:0,currentPage:1,pageSize:10,loading:!1},Invest_channel:[],fileList:[],allAdmin:[]}},created:function(){this.getList(),this.getChannel(),this.getAllAdmin(),this.getRoleBtree()},watch:{"searchForm.invest_channel":{handler:function(t){this.searchForm.invest_channel=t},deep:!0,immediate:!0}},methods:{investChannelChange:function(t){console.log(t)},getRoleBtree:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a,i,n,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.post("System/roleBtree",{loginId:f.a.get("user")["id"],loginToken:f.a.get("loginToken")});case 2:if(e=t.sent,a=Object(r["a"])(e,2),i=a[0],n=a[1],!i){t.next=8;break}return t.abrupt("return");case 8:this.department_id=n.tree,l=[],n.list.forEach((function(t){"应用"==t.title&&(t.node.forEach((function(t){"1"==t.system?t.title=t.title+"_Android":"2"==t.system?t.title=t.title+"_IOS":"3"==t.system&&(t.title=t.title+"_微信小程序")})),l=t.node)})),this.apps=l;case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onDown:function(t){if(t){var e="".concat(t,"?t=").concat((new Date).getTime());window.open(e)}},getAllAdmin:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.post("Admin/getAllAdmin",{loginId:f.a.get("user")["id"],loginToken:f.a.get("loginToken")});case 2:if(e=t.sent,a=Object(r["a"])(e,2),i=a[0],n=a[1],!i){t.next=8;break}return t.abrupt("return");case 8:this.allAdmin=n;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getChannel:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.post("Invest_Statistics/getInvestChannel",{loginId:f.a.get("user")["id"],loginToken:f.a.get("loginToken")});case 2:if(e=t.sent,a=Object(r["a"])(e,2),i=a[0],n=a[1],!i){t.next=8;break}return t.abrupt("return");case 8:this.Invest_channel=n;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),dateChange:function(t,e){1==e&&!h()(t).isBefore(this.addForm.time_end)&&this.addForm.time_end?(this.$message.warning("开始时间不能大于结束时间"),this.addForm.time_begin=""):2==e&&!h()(t).isAfter(this.addForm.time_begin)&&this.addForm.time_begin&&(this.$message.warning("结束时间不能小于开始时间"),this.addForm.time_end="")},formatSearch:function(t){var e=this.searchForm[t].appInfo.join()?this.searchForm[t].appInfo.join():void 0;return e},getList:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a,i,n,l,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.tableData.loading=!0,e=_.a.cloneDeep(this.searchForm),e.app_id=this.searchForm.appid.appInfo,a=Object.assign({},e,{pageSize:this.tableData.pageSize,currentPage:this.tableData.currentPage,loginId:f.a.get("user")["id"],loginToken:f.a.get("loginToken")}),delete a.appid,t.next=7,this.$http.post("Invest_Statistics/targetList",a);case 7:if(i=t.sent,n=Object(r["a"])(i,2),l=n[0],s=n[1],this.tableData.loading=!1,!l){t.next=14;break}return t.abrupt("return");case 14:this.tableData.data=s.list,this.tableData.total=s.total;case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),dialogFormVisibleConfirm:function(){var t=this;this.$refs.ruleForm.validate(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(a){var i,n,l,s,o,c,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=25;break}for(l in i=["target_amount","target_roi","target_cpi","target_device_new","target_order_num"],n=[],t.addForm)i.indexOf(l)>-1&&""==t.addForm[l]&&n.push(!0);if(n.length!=i.length){e.next=6;break}return e.abrupt("return",t.$message.warning("目标值至少填写一个！"));case 6:return t.dialogFormVisible=!1,s="Invest_Statistics/addTarget",s=1==t.type?"Invest_Statistics/addTarget":"Invest_Statistics/updateTarget",t.tableData.loading=!0,o=_.a.cloneDeep(t.addForm),o.invest_channel_id=o.invest_channel_id[o.invest_channel_id.length-1],o.time_begin=h()(o.time_begin).format("YYYYMMDD"),o.time_end=h()(o.time_end).format("YYYYMMDD"),e.next=16,t.$http.post(s,o);case 16:if(c=e.sent,u=Object(r["a"])(c,2),d=u[0],u[1],!d){e.next=22;break}return e.abrupt("return",t.tableData.loading=!1);case 22:t.$message.success(1==t.type?"新增成功！":"修改成功！"),t.tableData.currentPage=1,t.getList();case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},initFrom:function(){this.FilterLayoutkey+=1,this.searchForm={appid:{appInfo:[]},target_time:[h()().subtract(7,"d").format("YYYY-MM-DD"),h()().subtract(1,"d").format("YYYY-MM-DD")],create_time:[],admin_id:[],invest_channel:[],target_admin:[]}},onSubmit:function(){this.tableData.currentPage=1,this.getList()},onPageChange:function(t){this.tableData.currentPage=t,this.getList()},onSizeChange:function(t){this.tableData.pageSize=t,this.getList()},onSuccess:function(t){this.$refs["upload"]&&this.$refs["upload"].clearFiles(),1!=t.code?this.$notify.error({title:"错误",message:t.msg}):(this.$message.success("上传成功"),this.tableData.currentPage=1,this.getList())},onError:function(){this.$message.warning("上传错误，请重新尝试")},beforeUpload:function(t){},uploadchange:function(t,e){var a=".xls, .xlsx, .docx",i=t.name.split("."),n=i.pop();if(a.indexOf(n)<0){this.$message.warning("请选择正确格式文件");var r=e.findIndex((function(e){return e.name==t.name}));r>-1&&(e.splice(r,1),this.fileList=e)}else;},uploadClick:function(){this.uploadVisible=!0},submitUpload:function(){this.$refs.upload.submit()},add:function(){var t=this;this.FilterLayoutkey+=1,this.type=1,this.addForm={time_begin:"",time_end:"",app_id:"",invest_channel_id:"",admin_id:"",target_amount:"",target_roi:"",target_cpi:"",target_device_new:"",target_order_num:""},setTimeout((function(){t.dialogFormVisible=!0}),100)},edit:function(t){this.FilterLayoutkey+=1,this.type=2,this.dialogFormVisible=!0;var e=_.a.cloneDeep(t),a=e.date_b,i=e.date_e,n=e.invest_channel_id,r=e.admin_id,l=e.target_amount,s=e.target_recycling,o=e.target_device_new,c=e.target_order_num,u=e.app_id;this.Invest_channel.forEach((function(t){t.children.forEach((function(e){e.id==n&&(n=[t.id,e.id])}))})),this.addForm={time_begin:h()(a).format("YYYY-MM-DD"),time_end:h()(i).format("YYYY-MM-DD"),invest_channel_id:n,admin_id:r,app_id:Number(u)?u:"",target_amount:l,target_recycling:s,target_device_new:o,target_order_num:c,id:t.id}},del:function(t){var e=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(l["a"])(regeneratorRuntime.mark((function a(){var i,n,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.tableData.loading=!0,a.next=3,e.$http.post("Invest_Statistics/delTarget",{id:t});case 3:if(i=a.sent,n=Object(r["a"])(i,2),l=n[0],n[1],!l){a.next=9;break}return a.abrupt("return",e.tableData.loading=!1);case 9:e.getList(),e.$message({type:"success",message:"删除成功!"});case 11:case"end":return a.stop()}}),a)}))))}}}),v=b,y=(a("fa4e"),a("2877")),k=Object(y["a"])(v,i,n,!1,null,"5ffde33a",null);e["default"]=k.exports},"3b2b":function(t,e,a){var i=a("7726"),n=a("5dbc"),r=a("86cc").f,l=a("9093").f,s=a("aae3"),o=a("0bfb"),c=i.RegExp,u=c,d=c.prototype,p=/a/g,h=/a/g,m=new c(p)!==p;if(a("9e1e")&&(!m||a("79e5")((function(){return h[a("2b4c")("match")]=!1,c(p)!=p||c(h)==h||"/a/i"!=c(p,"i")})))){c=function(t,e){var a=this instanceof c,i=s(t),r=void 0===e;return!a&&i&&t.constructor===c&&r?t:n(m?new u(i&&!r?t.source:t,e):u((i=t instanceof c)?t.source:t,i&&r?o.call(t):e),a?this:d,c)};for(var f=function(t){t in c||r(c,t,{configurable:!0,get:function(){return u[t]},set:function(e){u[t]=e}})},g=l(u),_=0;g.length>_;)f(g[_++]);d.constructor=c,c.prototype=d,a("2aba")(i,"RegExp",c)}a("7a56")("RegExp")},"4f7f":function(t,e,a){"use strict";var i=a("c26b"),n=a("b39a"),r="Set";t.exports=a("e0b8")(r,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return i.def(n(this,r),t=0===t?0:t,t)}},i)},"55dd":function(t,e,a){"use strict";var i=a("5ca1"),n=a("d8e8"),r=a("4bf8"),l=a("79e5"),s=[].sort,o=[1,2,3];i(i.P+i.F*(l((function(){o.sort(void 0)}))||!l((function(){o.sort(null)}))||!a("2f21")(s)),"Array",{sort:function(t){return void 0===t?s.call(r(this)):s.call(r(this),n(t))}})},"73a1":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"ac"},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","multiple-limit":100,"collapse-tags":""},on:{"remove-tag":t.clearData,change:t.changeOption,focus:t.initOption,"visible-change":t.visblechange},model:{value:t.value.appInfo,callback:function(e){t.$set(t.value,"appInfo",e)},expression:"value.appInfo"}},[a("div",{staticStyle:{"min-width":"500px"}},[a("el-row",[a("el-col",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.load,expression:"load"}],staticClass:"wrapper-left-box",attrs:{span:12,"infinite-scroll-immediate":!1,"infinite-scroll-distance":20},scopedSlots:t._u([{key:"prefix",fn:function(){return[t.systemIcon?a("span",{staticClass:"iconfont",class:t.systemIcon}):t._e()]},proxy:!0}])},[a("div",{staticClass:"wrapper-left"},[a("div",{staticClass:"left_title"},[a("el-button",{attrs:{type:"text"},on:{click:t.AllOption}},[t._v("全选")]),a("el-button",{attrs:{type:"text",disabled:!t.value.appInfo.length},on:{click:t.backOption}},[t._v("反选\n                ")])],1),a("div",{staticStyle:{padding:"5px 20px"}},[a("el-input",{attrs:{size:"mini"},on:{input:t.inputChange},model:{value:t.inputval,callback:function(e){t.inputval=e},expression:"inputval"}})],1)]),a("div",{staticClass:"box-wrapper"},t._l(t.data_show_arr,(function(e,i){return a("el-option",{key:i,staticClass:"options-wrapper",attrs:{value:e.id,label:e.title}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.title,placement:"right"}},[a("div",[a("span",{staticClass:"iconfont",class:[e.system?t.formatSystemIcon(e.system):"",e.shownothing?"shownothing":""]},[t._v(t._s(e.title)+"\n                    ")]),e.subtitle?a("span",{staticClass:"subtitle"},[t._v(t._s(e.subtitle))]):t._e()])])],1)})),1)]),a("el-col",{staticClass:"wrapper-left-box",attrs:{span:12}},[a("div",{key:t.num,staticClass:"option_child"},[a("div",{staticClass:"title"},[a("span",[t._v("已选择："+t._s(t.value.optionList?t.value.optionList.length:0)+" 条数据")]),a("el-button",{attrs:{type:"text"},on:{click:t.cleanOption}},[t._v("清空全部")])],1),t._l(t.value.optionList,(function(e,i){return a("div",{key:i,staticClass:"option_child_card"},[a("div",[a("span",{staticClass:"iconfont",class:e.system?t.formatSystemIcon(e.system):""},[t._v(t._s(e.title)+"\n                  ")]),e.subtitle?a("span",{staticClass:"subtitle"},[t._v(t._s(e.subtitle))]):t._e()]),a("span",{staticClass:"el-icon-close del_option",on:{click:function(a){return t.delOption(e.id)}}})])}))],2)])],1)],1)]),t.multipleFlag?a("el-button",{staticStyle:{"margin-left":"10px",height:"40px"},attrs:{type:"primary"},on:{click:t.open}},[t._v("批量")]):t._e()],1),a("el-dialog",{attrs:{title:"批量筛选",visible:t.dialogTableVisible,"close-on-press-escape":!1,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogTableVisible=e},close:t.cancel}},[a("el-input",{attrs:{type:"textarea",rows:6,placeholder:"请输入内容，回车分割"},on:{input:t.search},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}}),a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"warning",plain:""},on:{click:t.clear}},[t._v("清空")]),a("el-divider",[t._v("总共查询（"+t._s(t.textarea_arr.length)+"）；"),a("span",{staticStyle:{color:"#409eff"}},[t._v("搜索结果（"+t._s(t.compress_result.length)+"）；")]),a("span",{staticStyle:{color:"#67c23a"}},[t._v("已选择（"+t._s(t.checkList.length)+"）")])]),t.compress_result.length>0?[a("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")]),a("el-checkbox-group",{on:{change:t.handleCheckedItem},model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.compress_result,(function(t,e){return a("el-checkbox",{key:e,attrs:{label:t}})})),1)]:a("div",{staticStyle:{"text-align":"center"}},[t._v("暂无相关渠道")]),a("div",[t.compress_result.length>0?a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确定\n      ")]):t._e(),a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"info"},on:{click:t.cancel}},[t._v("取消")])],1)],2)],1)},n=[],r=(a("ac4d"),a("8a81"),a("1c4c"),a("7f7f"),a("6b54"),a("3b2b"),a("5df3"),a("4f7f"),a("ac6a"),a("20d6"),a("2909")),l=(a("a481"),a("28a5"),a("2ef0")),s=a.n(l);function o(t,e){var a="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=c(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var i=0,n=function(){};return{s:n,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,s=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return l=t.done,t},e:function(t){s=!0,r=t},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw r}}}}function c(t,e){if(t){if("string"===typeof t)return u(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}var d={props:{value:{type:Object},data:{type:Array},multipleFlag:{type:Boolean,default:!1}},data:function(){return{num:0,loadNum:0,inputval:"",data_temp:[],data_show_arr:[],data_temp_chunk_arr:[],channelArrList:[],searchTimer:null,timer:null,isIndeterminate:!0,checkAll:!1,checkList:[],compress_result:[],textarea:"",dialogTableVisible:!1,textarea_arr:[]}},mounted:function(){this.num+=1},methods:{search:function(){var t=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){var e=t.textarea.split(/[\n,]/g),a=e.map((function(t){return t.replace(/\s*/g,"")}));t.textarea_arr=e,t.compress_result=s.a.compact(s.a.intersection(a,t.channelArrList)),t.handleCheckAllChange(!0)}),300)},handleCheckAllChange:function(t){this.checkAll=!0,this.checkList=t?this.compress_result:[],this.isIndeterminate=!1},handleCheckedItem:function(t){var e=t.length;this.checkAll=e===this.compress_result.length,this.isIndeterminate=e>0&&e<this.compress_result.length},open:function(){this.dialogTableVisible=!0},confirm:function(){if(0==this.checkList.length)return this.$message.info("请选择");this.dialogTableVisible=!1,this.$message.success("批量筛选成功，请点击查询"),this.$emit("input",{appInfo:this.checkList,optionList:[]})},clear:function(){this.textarea="",this.checkList="",this.compress_result="",this.checkAll=!1},cancel:function(){this.dialogTableVisible=!1},initMuitpleSearch:function(){this.textarea="",this.checkList=[],this.compress_result=[],this.checkAll=!1},load:function(){this.data_show_arr[0].shownothing||this.loadNum<this.data_temp_chunk_arr.length-1&&(this.loadNum+=1,this.data_show_arr=[].concat(Object(r["a"])(this.data_show_arr),Object(r["a"])(this.data_temp_chunk_arr[this.loadNum])))},changeOption:function(){for(var t=this,e=[],a=function(a){var i=t.data.findIndex((function(e){return e.id==t.value.appInfo[a]}));i>-1&&e.push(t.data[i])},i=0;i<this.value.appInfo.length;i++)a(i);this.value.optionList=e,this.initMuitpleSearch()},initOption:function(){var t=this,e=[];this.data.forEach((function(a){t.value.appInfo.forEach((function(t){a.id==t&&e.push(a)}))})),this.value.optionList=e,this.num+=1,this.inputval="",this.initListData(this.data)},initListData:function(t){this.loadNum=0,this.data_temp_chunk_arr=s.a.chunk(t,100),this.data_show_arr=this.data_temp_chunk_arr[0]},AllOption:function(){var t,e=[],a=o(this.data_temp);try{for(a.s();!(t=a.n()).done;){var i=t.value;e.push(i.id)}}catch(l){a.e(l)}finally{a.f()}var n=this.value.appInfo.concat(e);this.value.appInfo=Object(r["a"])(new Set(n)),this.changeOption(),this.initMuitpleSearch()},visblechange:function(t){},inputChange:function(){var t=this;this.searchTimer&&clearTimeout(this.searchTimer),this.searchTimer=setTimeout((function(){if(""==t.inputval)t.data_temp=s.a.cloneDeep(t.data),t.initListData(t.data_temp);else{var e=[],a=t.inputval.toLocaleLowerCase(),i=new RegExp(a,"i");t.data.forEach((function(t){(t.title&&i.test(t.title)||t.subtitle&&i.test(t.subtitle))&&e.push(t)}));var n=t.value.optionList.length>0?t.value.optionList[0]:"";e.findIndex((function(t){return t.id==n.id}));if(e.length)t.data_temp=e,t.initListData(e);else{var r=[{title:"没有搜索到数据~",id:"-100",shownothing:!0}];t.data_temp=[],t.data_show_arr=r}}}),300)},cleanOption:function(){this.value.appInfo=[],this.value.optionList=[],this.initMuitpleSearch()},backOption:function(){var t=this,e=[],a=[],i=this.data_temp.filter((function(e){return-1==t.value.appInfo.indexOf(e.id)}));if(i.length){for(var n=0;n<i.length;n++){var r=this.data_temp[n];e.push(r.id),a.push(r)}this.value.appInfo=e,this.value.optionList=a}else this.value.appInfo=[],this.value.optionList=[];this.initMuitpleSearch()},delOption:function(t){var e=this.value.optionList.filter((function(e){return e.id!=t}));this.value.appInfo=e.map((function(t){return t.id})),this.value.optionList=e,this.initMuitpleSearch()},formatSystemIcon:function(t){switch(String(t)){case"1":return"icon-anzhuo";case"2":return"icon-ios";case"3":return"icon-weixin";case"4":return"icon-baidu";case"5":return"icon-chrome";default:return""}},clearData:function(){0==this.value.appInfo.length&&this.$emit("clearData")}},watch:{value:{handler:function(t,e){this.$emit("changeScope",t)},immediate:!0,deep:!0},data:{handler:function(t){this.data_temp=s.a.cloneDeep(t),this.data_show_arr=s.a.chunk(this.data_temp,100)[0],this.multipleFlag&&(this.channelArrList=s.a.flatMap(this.data_temp,(function(t){return[t.title]})))},immediate:!0,deep:!0}}},p=d,h=(a("cf15"),a("2877")),m=Object(h["a"])(p,i,n,!1,null,"54535d96",null);e["a"]=m.exports},8154:function(t,e,a){},"935a":function(t,e,a){},bbb5:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{display:"flex"}},[a("el-cascader-multi",{attrs:{data:t.options,clearable:"",filterable:"","collapse-tags":"","append-to-body":!1},on:{change:t.change},model:{value:t.insideValue,callback:function(e){t.insideValue=e},expression:"insideValue"}}),t.multi?a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:t.open}},[t._v("批量")]):t._e()],1),a("el-dialog",{attrs:{title:"批量筛选",visible:t.dialogTableVisible,"close-on-press-escape":!1,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogTableVisible=e},close:t.cancel}},[a("el-input",{attrs:{type:"textarea",rows:6,placeholder:"请输入内容，回车分割"},on:{input:t.search},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}}),a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"warning",plain:""},on:{click:t.clear}},[t._v("清空")]),a("el-divider",[t._v("搜索结果（"+t._s(t.compress_result.length)+"）；"),a("span",{staticStyle:{color:"#67c23a"}},[t._v("已选择（"+t._s(t.checkList.length)+"）")])]),t.compress_result.length>0?[a("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")]),a("el-checkbox-group",{on:{change:t.handleCheckedItem},model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.compress_result,(function(t,e){return a("el-checkbox",{key:e,attrs:{label:t}})})),1)]:a("div",{staticStyle:{"text-align":"center"}},[t._v("暂无相关渠道")]),a("div",[t.compress_result.length>0?a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确定\n      ")]):t._e(),a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"info"},on:{click:t.cancel}},[t._v("取消")])],1)],2)],1)},n=[],r=(a("8e6e"),a("456d"),a("55dd"),a("3835")),l=(a("96cf"),a("1da1")),s=(a("28a5"),a("ade3")),o=(a("ac6a"),a("c5f6"),a("2f62")),c=a("2ef0"),u=a.n(c);function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var h={props:{multi:{type:Boolean,default:!1},value:{type:[String,Number,Array],default:""},optionsList:{type:Array,default:function(){return[]}},paramFlag:{type:Boolean,default:!1},haveAll:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},data:function(){return{timer:null,isIndeterminate:!0,checkAll:!1,checkList:[],compress_result:[],channelChildrens:[],textarea:"",dialogTableVisible:!1,insideValue:[],options:[],optionsCopy:[],all:!1,cakey:1,selected:[]}},mounted:function(){this.paramFlag?this.opertionListFun(this.optionsList):this.channel.length?this.opertionListFun(this.channel):this.fetchChannel()},watch:{optionsList:{handler:function(){this.opertionListFun(this.optionsList)},deep:!0,immediate:!0},insideValue:function(t){if(t.length){this.clear();var e=[];t.forEach((function(t){e.push(t[1])})),this.$emit("input",e)}else this.$emit("input",t)}},computed:p({},Object(o["d"])({channel:function(t){return t.channel.data}})),methods:p(p({search:function(){var t=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){var e=t.textarea.split(/[\n,]/g);t.compress_result=u.a.compact(u.a.intersection(e,t.channelChildrens)),t.handleCheckAllChange(!0)}),300)},handleCheckAllChange:function(t){this.checkAll=!0,this.checkList=t?this.compress_result:[],this.isIndeterminate=!1},handleCheckedItem:function(t){var e=t.length;this.checkAll=e===this.compress_result.length,this.isIndeterminate=e>0&&e<this.compress_result.length},open:function(){this.dialogTableVisible=!0,this.insideValue=[]},confirm:function(){this.$message.info("请选择"),0!=this.checkList.length&&(this.dialogTableVisible=!1,this.$message.success("批量筛选成功，请点击查询"),this.$emit("input",this.checkList))},clear:function(){this.textarea="",this.checkList="",this.compress_result="",this.checkAll=!1},cancel:function(){this.dialogTableVisible=!1},opertionListFun:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[],a=t.map((function(t){var a=[];return a=t.channels?t.channels.map((function(t){return e.push(t),{label:t||t.title||t.label,value:t||t.id||t.value}})):t.children.map((function(t){return{label:t.title||t.label,value:t.id||t.value}})),{label:t.label||t.title,value:t.value||t.id,children:a}}));this.channelChildrens=e,this.options=a,this.optionsCopy=a},change:function(t){this.$emit("change",t)},removetag:function(t){var e={stopPropagation:function(){}};try{this.$refs.cascader.clearValue(e)}catch(a){this.$refs.cascader.handleClear(e)}}},Object(o["b"])(["getChannel"])),{},{fetchChannel:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getChannel();case 2:if(e=t.sent,a=Object(r["a"])(e,2),i=a[0],n=a[1],!i){t.next=8;break}return t.abrupt("return");case 8:this.opertionListFun(n);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onFilter:function(t){this.options=t?this.optionsCopy.filter((function(e){if(~e.indexOf(t)||~e.toUpperCase().indexOf(t.toUpperCase()))return!0})):this.optionsCopy},onInputAll:function(t){this.insideValue=t?this.options:[]},isSameArray:function(t,e){var a=t.concat([]),i=e.concat([]),n=a.sort().join(""),r=i.sort().join("");return n===r}})},m=h,f=(a("06bb"),a("2877")),g=Object(f["a"])(m,i,n,!1,null,"b91e7e3e",null);e["a"]=g.exports},cf15:function(t,e,a){"use strict";a("8154")},f122:function(t,e,a){},fa4e:function(t,e,a){"use strict";a("935a")}}]);
//# sourceMappingURL=chunk-efc61bb6.1.0.0.1672021042960.js.map