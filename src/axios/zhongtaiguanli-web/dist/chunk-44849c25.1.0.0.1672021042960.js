(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44849c25"],{"28a5":function(t,e,r){"use strict";var n=r("aae3"),i=r("cb7c"),a=r("ebd6"),s=r("0390"),c=r("9def"),o=r("5f1b"),u=r("520a"),p=r("79e5"),l=Math.min,h=[].push,f="split",d="length",m="lastIndex",b=4294967295,y=!p((function(){RegExp(b,"y")}));r("214f")("split",2,(function(t,e,r,p){var v;return v="c"=="abbc"[f](/(b)*/)[1]||4!="test"[f](/(?:)/,-1)[d]||2!="ab"[f](/(?:ab)*/)[d]||4!="."[f](/(.?)(.?)/)[d]||"."[f](/()()/)[d]>1||""[f](/.?/)[d]?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!n(t))return r.call(i,t,e);var a,s,c,o=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,f=void 0===e?b:e>>>0,y=new RegExp(t.source,p+"g");while(a=u.call(y,i)){if(s=y[m],s>l&&(o.push(i.slice(l,a.index)),a[d]>1&&a.index<i[d]&&h.apply(o,a.slice(1)),c=a[0][d],l=s,o[d]>=f))break;y[m]===a.index&&y[m]++}return l===i[d]?!c&&y.test("")||o.push(""):o.push(i.slice(l)),o[d]>f?o.slice(0,f):o}:"0"[f](void 0,0)[d]?function(t,e){return void 0===t&&0===e?[]:r.call(this,t,e)}:r,[function(r,n){var i=t(this),a=void 0==r?void 0:r[e];return void 0!==a?a.call(r,i,n):v.call(String(i),r,n)},function(t,e){var n=p(v,t,this,e,v!==r);if(n.done)return n.value;var u=i(t),h=String(this),f=a(u,RegExp),d=u.unicode,m=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(y?"y":"g"),A=new f(y?u:"^(?:"+u.source+")",m),g=void 0===e?b:e>>>0;if(0===g)return[];if(0===h.length)return null===o(A,h)?[h]:[];var w=0,k=0,x=[];while(k<h.length){A.lastIndex=y?k:0;var O,C=o(A,y?h:h.slice(k));if(null===C||(O=l(c(A.lastIndex+(y?0:k)),h.length))===w)k=s(h,k,d);else{if(x.push(h.slice(w,k)),x.length===g)return x;for(var j=1;j<=C.length-1;j++)if(x.push(C[j]),x.length===g)return x;k=w=O}}return x.push(h.slice(w)),x}]}))},"39a8":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"page"},[r("div",{staticClass:"content"},[r("el-form",{attrs:{"label-width":"80px"}},[r("el-form-item",{attrs:{label:""}},[r("el-tree",{ref:"AuthTree",attrs:{data:t.AuthTree,props:t.treeProps,"show-checkbox":"","node-key":"id","default-expand-all":""}})],1),r("el-form-item",{attrs:{label:"选择APP"}},[r("el-select",{staticClass:"app-control",attrs:{placeholder:"请选择",filterable:""},on:{change:t.onChangeApp},scopedSlots:t._u([{key:"prefix",fn:function(){return[r("span",{staticClass:"iconfont",class:t.systemIcon})]},proxy:!0}]),model:{value:t.currentApp,callback:function(e){t.currentApp=e},expression:"currentApp"}},t._l(t.app,(function(e){return r("el-option",{key:e.id,attrs:{value:e.id,label:e.title}},[r("span",{staticClass:"iconfont",class:t.formatSystem(e.system)},[t._v(t._s(e.title)+t._s(1===e.type?"(已分配权限)":""))])])})),1)],1),r("el-form-item",{attrs:{label:""}},[r("el-tree",{ref:"AppAuthTree",attrs:{data:t.AppAuthTree,props:t.treeProps,"show-checkbox":"","node-key":"id","default-expand-all":""}})],1),r("el-form-item",{staticClass:"operate"},[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.onSubmitAuth}},[t._v("保存至当前APP")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.showCopy=!0}}},[t._v("保存并复制当前权限到其他APP")])],1)],1)],1),r("el-dialog",{attrs:{visible:t.showCopy,title:"请选择",width:"60%"},on:{"update:visible":function(e){t.showCopy=e}}},[r("el-select",{staticClass:"copy-control",attrs:{placeholder:"请选择",multiple:"",filterable:""},model:{value:t.copyApp,callback:function(e){t.copyApp=e},expression:"copyApp"}},t._l(t.app,(function(e){return r("el-option",{key:e.id,attrs:{value:e.id,label:e.title}},[r("span",{staticClass:"iconfont",class:t.formatSystem(e.system)},[t._v(t._s(e.title)+t._s(1===e.type?"(已分配权限)":""))])])})),1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("div",{staticClass:"option-item"},[r("el-button",{attrs:{type:"primary"},on:{click:t.onCopyAll}},[t._v("全选")]),r("el-button",{attrs:{type:"danger"},on:{click:function(e){t.copyApp=[]}}},[t._v("清空")])],1),r("div",{staticClass:"option-item"},[r("el-button",{attrs:{type:"primary",loading:t.isLoading},on:{click:t.onSubmitCopyAuth}},[t._v("保 存")]),r("el-button",{on:{click:function(e){t.showCopy=!1}}},[t._v("取 消")])],1)])],1)],1)},i=[],a=(r("8e6e"),r("456d"),r("ac4d"),r("8a81"),r("5df3"),r("1c4c"),r("7f7f"),r("6b54"),r("ade3")),s=(r("28a5"),r("ac6a"),r("3835")),c=(r("96cf"),r("1da1")),o=(r("7514"),r("a3be"));function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){Object(a["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e){var r="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=h(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){c=!0,a=t},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw a}}}}function h(t,e){if(t){if("string"===typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var d={data:function(){return{currentApp:"",AuthTree:[],AppAuthTree:[],treeProps:{children:"children",label:"name"},showCopy:!1,copyApp:[],app:[],adminId:"",isLoading:!1,treeLists:[]}},mounted:function(){this.adminId=this.$route.query.id,this.fetchApp()},computed:{systemIcon:function(t){var e=t.app,r=t.currentApp,n=_.find(e,(function(t){return t.id===r}));return n?this.formatSystem(n.system):""}},methods:{fetchApp:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,r,n,i,a,c,u,p,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.adminId,e){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.$http.post(o["a"].admin.app,{adminId:e});case 5:if(r=t.sent,n=Object(s["a"])(r,2),i=n[0],a=n[1],!i){t.next=11;break}return t.abrupt("return");case 11:this.app=a,c=[],u=l(a);try{for(u.s();!(p=u.n()).done;)h=p.value,1==h.type&&c.push(h.id)}catch(i){u.e(i)}finally{u.f()}this.copyApp=c,a.length&&(this.currentApp=a[0].id,this.fetchAuth());case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),fetchMenu:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,r,n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.currentApp,e){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.$http.post(o["a"].admin.menu,{appId:e});case 5:if(r=t.sent,n=Object(s["a"])(r,2),i=n[0],a=n[1],!i){t.next=11;break}return t.abrupt("return");case 11:this.treeLists=JSON.parse(JSON.stringify(a)),this.AuthTree=a.splice(0,a.length-1),this.AppAuthTree=a.splice(a.length-1,a.length);case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),fetchAuth:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,r,n,i,a,c,u,p,l,h,f,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.currentApp,r=this.adminId,e){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.fetchMenu();case 5:return t.next=7,this.$http.post(o["a"].admin.auth_detail,{appId:e,adminId:r});case 7:if(n=t.sent,i=Object(s["a"])(n,2),a=i[0],c=i[1],!a){t.next=13;break}return t.abrupt("return");case 13:u=c.adminAuth,p=void 0===u?"":u,l=c.authArr,h=void 0===l?"":l,f=[],this.treeLists.forEach((function(t){f.push(t.id),t.children.forEach((function(t){t.children&&t.children.length>0&&f.push(t.id)}))})),d=[],p.split(",").forEach((function(t){-1===f.indexOf(t)&&d.push(t)})),this.$refs["AuthTree"].setCheckedKeys(d),this.$refs["AppAuthTree"].setCheckedKeys(h.split(","));case 20:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onSubmitAuth:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,r,n,i,c,u,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.currentApp,r=this.adminId,n=this.$refs["AuthTree"].getCheckedKeys().join(","),i=this.$refs["AppAuthTree"].getCheckedKeys().join(","),e){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,this.$http.post(o["a"].admin.edit_auth,{appId:e,adminId:r,adminAuth:n,authArr:Object(a["a"])({},e,i)});case 7:if(c=t.sent,u=Object(s["a"])(c,2),p=u[0],u[1],!p){t.next=13;break}return t.abrupt("return");case 13:this.isLoading=!1,this.$message({message:"保存成功",type:"success"}),this.fetchApp();case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onChangeApp:function(t){this.currentApp=t,this.$refs["AppAuthTree"].setCheckedKeys([]),this.fetchAuth()},onSubmitCopyAuth:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,r,n,i,c,u,l,h,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.currentApp,r=this.adminId,n=this.copyApp,i=this.$refs["AuthTree"].getCheckedKeys().join(","),c=this.$refs["AppAuthTree"].getCheckedKeys().join(","),e){t.next=5;break}return t.abrupt("return");case 5:return u={},n.forEach((function(t){u[t]=c})),this.isLoading=!0,t.next=10,this.$http.post(o["a"].admin.edit_auth,{appId:e,adminId:r,adminAuth:i,authArr:p(Object(a["a"])({},e,c),u)});case 10:if(l=t.sent,h=Object(s["a"])(l,2),f=h[0],h[1],!f){t.next=16;break}return t.abrupt("return");case 16:this.isLoading=!1,this.$message({message:"保存成功",type:"success"}),this.copyApp=[],this.showCopy=!1,this.fetchApp();case 21:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onCopyAll:function(){this.copyApp=this.app.map((function(t){return t.id}))},formatSystem:function(t){switch(String(t)){case"1":return"icon-anzhuo";case"2":return"icon-ios";case"3":return"icon-weixin";case"4":return"icon-baidu";case"5":return"icon-chrome";default:return""}}}},m=d,b=(r("e205"),r("2877")),y=Object(b["a"])(m,n,i,!1,null,"12755da2",null);e["default"]=y.exports},"5b2c":function(t,e,r){},e205:function(t,e,r){"use strict";r("5b2c")}}]);
//# sourceMappingURL=chunk-44849c25.1.0.0.1672021042960.js.map